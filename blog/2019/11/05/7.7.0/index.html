<!doctype html><html lang=en dir=ltr class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.7.0"><title data-rh=true>7.7.0 Released: Error recovery and TypeScript 3.7 ¬∑ Babel</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://babel.qubitpi.org/blog/2019/11/05/7.7.0><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docusaurus_tag content=default><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docsearch:docusaurus_tag content=default><meta data-rh=true property=og:title content="7.7.0 Released: Error recovery and TypeScript 3.7 ¬∑ Babel"><meta data-rh=true name=description content="Today we are releasing Babel 7.7.0!"><meta data-rh=true property=og:description content="Today we are releasing Babel 7.7.0!"><meta data-rh=true property=og:type content=article><meta data-rh=true property=article:published_time content=2019-11-05T10:00:00.000Z><meta data-rh=true property=article:author content=https://twitter.com/NicoloRibaudo><link data-rh=true rel=icon href=/img/favicon.png><link data-rh=true rel=canonical href=https://babel.qubitpi.org/blog/2019/11/05/7.7.0><link data-rh=true rel=alternate href=https://babel.qubitpi.org/blog/2019/11/05/7.7.0 hreflang=en><link data-rh=true rel=alternate href=https://babel.qubitpi.org/blog/2019/11/05/7.7.0 hreflang=x-default><link data-rh=true rel=preconnect href=https://M7KGJDK6WF-dsn.algolia.net crossorigin=anonymous><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@id":"https://babel.qubitpi.org/blog/2019/11/05/7.7.0","@type":"BlogPosting","author":{"@type":"Person","name":"Nicol√≤ Ribaudo","url":"https://twitter.com/NicoloRibaudo"},"datePublished":"2019-11-05T10:00:00.000Z","description":"Today we are releasing Babel 7.7.0!","headline":"7.7.0 Released: Error recovery and TypeScript 3.7","isPartOf":{"@id":"https://babel.qubitpi.org/blog","@type":"Blog","name":"Blog"},"keywords":[],"mainEntityOfPage":"https://babel.qubitpi.org/blog/2019/11/05/7.7.0","name":"7.7.0 Released: Error recovery and TypeScript 3.7","url":"https://babel.qubitpi.org/blog/2019/11/05/7.7.0"}</script><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="Babel RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="Babel Atom Feed"><link rel=search type=application/opensearchdescription+xml title=Babel href=/opensearch.xml><script src=https://unpkg.com/@babel/standalone@^7.0.0/babel.min.js defer></script><script src=/js/components/mini-repl.js type=module></script><script src=/js/components/assumption-repl.js type=module></script><link rel=stylesheet href=/assets/css/styles.6b8cbdcb.css><script src=/assets/js/runtime~main.a22aa5de.js defer></script><script src=/assets/js/main.2ba274b4.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":(window.matchMedia("(prefers-color-scheme: light)").matches,"light"),document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/img/babel.svg><link rel=preload as=image href=https://d33wubrfki0l68.cloudfront.net/7a197cfe44548cc1a3f581152af70a3051e11671/78df8/img/babel.svg><div role=region aria-label="Skip to main content"><a class=skipToContent_oPtH href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/babel.svg alt="Babel logo" class="themedComponent_siVc themedComponent--light_hHel"><img src=/img/babel.svg alt="Babel logo" class="themedComponent_siVc themedComponent--dark_yETr"></div></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href=/docs/>Docs</a><a class="navbar__item navbar__link" href=/setup>Setup</a><a class="navbar__item navbar__link" href=/repl>Try it out</a><a class="navbar__item navbar__link" href=/videos/>Videos</a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/blog>Blog</a><div class=navbarSearchContainer_bzqh><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div><a href=https://opencollective.com/babel target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Donate<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPrP><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><a class="navbar__item navbar__link" href=/team>Team</a><a href=https://github.com/babel/babel target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPrP><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><div class="toggle_ki11 colorModeToggle_Hewu"><button class="clean-btn toggleButton_MMFG toggleButtonDisabled_Uw7m" type=button disabled title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live=polite aria-pressed=false><svg viewBox="0 0 24 24" width=24 height=24 class=lightToggleIcon_lgto><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 class=darkToggleIcon_U96C><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_MB5r"><div class="container margin-vert--lg"><div class=row><aside class="col col--3"><nav class="sidebar_CLW8 thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_DQfJ margin-bottom--md">All Blog Posts</div><div role=group><h3 class=yearGroupHeading_jjLT>2025</h3><ul class="sidebarItemList_rvuc clean-list"><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2025/06/30/7.28.0>7.28.0 Released: `babel.config.ts`, explicit resource management, and discard binding proposal</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2025/05/30/babel-8-beta>Announcing Babel 8 Beta</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2025/03/24/7.27.0>7.27.0 Released: better ecosystem alignment</a></ul></div><div role=group><h3 class=yearGroupHeading_jjLT>2024</h3><ul class="sidebarItemList_rvuc clean-list"><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2024/10/25/7.26.0>7.26.0 Released: stage 4 features enabled by default, and a new experimental code printer</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2024/07/26/7.25.0>7.25.0 Released: Safari bugfixes and duplicated named capturing groups</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2024/02/28/7.24.0>7.24.0 Released: Decorator updates and JSON modules imports</a></ul></div><div role=group><h3 class=yearGroupHeading_jjLT>2023</h3><ul class="sidebarItemList_rvuc clean-list"><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2023/10/16/cve-2023-45133>CVE-2023-45133: Finding an Arbitrary Code Execution Vulnerability In Babel</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2023/09/25/7.23.0>7.23.0 Released: Decorator Metadata and many new `import` features!</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2023/05/26/7.22.0>7.22.0 Released: Explicit Resource Management support and Import Attributes parsing</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2023/02/20/7.21.0>7.21.0 Released: Inline RegExp modifiers, TypeScript 5.0, and Decorators updates</a></ul></div><div role=group><h3 class=yearGroupHeading_jjLT>2022</h3><ul class="sidebarItemList_rvuc clean-list"><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2022/10/27/7.20.0>7.20.0 Released: Deno target and TypeScript 4.9</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2022/09/05/7.19.0>7.19.0 Released: Stage 3 decorators and more RegExp features!</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2022/05/19/7.18.0>7.18.0 Released: Destructuring private elements and TypeScript 4.7</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2022/02/02/7.17.0>7.17.0 Released: RegExp 'v' mode and ... ü•Å decorators!</a></ul></div><div role=group><h3 class=yearGroupHeading_jjLT>2021</h3><ul class="sidebarItemList_rvuc clean-list"><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2021/10/29/7.16.0>7.16.0 Released: ESLint 8 and TypeScript 4.5</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2021/07/26/7.15.0>7.15.0 Released: Hack-style pipelines, TypeScript const enums and Rhino target support</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2021/05/10/funding-update>Babel is used by millions, so why are we running out of money?</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2021/04/29/7.14.0>7.14.0 Released: New class features enabled by default, TypeScript 4.3, and better CommonJS interop</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2021/02/22/7.13.0>7.13.0 Released: Records and Tuples, granular compiler assumptions, and top-level targets</a></ul></div><div role=group><h3 class=yearGroupHeading_jjLT>2020</h3><ul class="sidebarItemList_rvuc clean-list"><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2020/10/15/7.12.0>7.12.0 Released: TypeScript 4.1, strings as import/export names, and class static blocks</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2020/07/30/7.11.0>7.11.0 Released: ECMAScript 2021 support in preset-env, TypeScript 4.0 support, printing config and the future of `babel-eslint`</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2020/07/13/the-state-of-babel-eslint>The State of babel-eslint</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2020/05/25/7.10.0>7.10.0 Released: Class Fields in preset-env, '#private in' checks and better React tree-shaking</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2020/03/16/7.9.0>7.9.0 Released: Smaller preset-env output, Typescript 3.8 support and a new JSX transform</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2020/01/11/7.8.0>7.8.0 Released: ECMAScript 2020, .mjs configuration files and @babel/cli improvements</a></ul></div><div role=group><h3 class=yearGroupHeading_jjLT>2019</h3><ul class="sidebarItemList_rvuc clean-list"><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2019/11/08/babels-funding-plans>Babel's Funding Plans</a><li class=sidebarItem__RMN><a aria-current=page class="sidebarItemLink_Ony9 sidebarItemLinkActive_MJ75" href=/blog/2019/11/05/7.7.0>7.7.0 Released: Error recovery and TypeScript 3.7</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2019/09/05/7.6.0>7.6.0 Released: Private static accessors and V8 intrinsic syntax</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2019/07/03/7.5.0>7.5.0 Released: dynamic import and F# pipelines</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2019/07/02/the-babel-podcast>The Babel Podcast</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2019/03/19/7.4.0>7.4.0 Released: core-js 3, static private methods and partial application</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2019/01/21/7.3.0>7.3.0 Released: Named capturing groups, private instance accessors and smart pipelines</a></ul></div><div role=group><h3 class=yearGroupHeading_jjLT>2018</h3><ul class="sidebarItemList_rvuc clean-list"><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2018/12/03/7.2.0>7.2.0 Released: Private Instance Methods</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2018/09/17/7.1.0>7.1.0 Released: Decorators, Private Static Fields</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2018/09/17/decorators>TC39 Standards Track Decorators in Babel</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2018/08/27/7.0.0>Babel 7 Released</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2018/07/27/removing-babels-stage-presets>Removing Babel's Stage Presets</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2018/07/19/whats-happening-with-the-pipeline-proposal>What's Happening With the Pipeline (|>) Proposal?</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2018/07/16/announcing-babels-new-partnership-with-trivago>Announcing Babel's New Partnership with trivago!</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2018/06/26/on-consuming-and-publishing-es2015+-packages>On Consuming (and Publishing) ES2015+ Packages</a></ul></div><div role=group><h3 class=yearGroupHeading_jjLT>2017</h3><ul class="sidebarItemList_rvuc clean-list"><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2017/12/27/nearing-the-7.0-release>Nearing the 7.0 Release</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2017/10/05/babel-turns-three>Babel Turns Three</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2017/09/12/planning-for-7.0>Planning for 7.0</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2017/09/11/zero-config-with-babel-macros>Zero-config code transformation with babel-plugin-macros</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/contributing-to-babel-three-lessons-to-remember>Contributing to Babel: Three Lessons to Remember</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/personal-experiences-at-babel-1-a-pr-with-unusually-high-number-of-reviews>Personal Experiences at Babel #1 ‚Äî A PR with Unusually High Number of Reviews</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2017/08/09/babel-and-summer-of-code>Babel and Summer of Code 2017</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2017/03/01/upgrade-to-babel-7-for-tool-authors>Upgrade to Babel 7 for Tool Authors (WIP)</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2017/03/01/upgrade-to-babel-7>Upgrade to Babel 7 (moved)</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2017/02/13/6.23.0>6.23.0 Released</a></ul></div><div role=group><h3 class=yearGroupHeading_jjLT>2016</h3><ul class="sidebarItemList_rvuc clean-list"><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2016/12/07/the-state-of-babel>The State of Babel</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2016/11/16/6.19.0>6.19.0 Released</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2016/10/24/6.18.0>6.18.0 Released</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2016/09/28/6.16.0>6.16.0 Released</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2016/08/26/babili>Babili (babel-minify)</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2016/08/24/6.14.0>6.14.0 Released</a></ul></div><div role=group><h3 class=yearGroupHeading_jjLT>2015</h3><ul class="sidebarItemList_rvuc clean-list"><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2015/11/03/babel-doctor>Babel Doctor</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2015/10/31/setting-up-babel-6>Setting up Babel 6</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2015/10/29/6.0.0>6.0.0 Released</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2015/07/07/react-on-es6-plus>React on ES6+</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2015/05/14/function-bind>Function Bind Syntax</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2015/03/31/5.0.0>5.0.0 Released</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2015/02/23/babel-loves-react>Babel &lt;3 React</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2015/02/15/not-born-to-die>Not Born to Die</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2015/01/27/2to3>2to3</a><li class=sidebarItem__RMN><a class=sidebarItemLink_Ony9 href=/blog/2015/01/12/6to5-esnext>6to5 + esnext</a></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class=title_Kdtz>7.7.0 Released: Error recovery and TypeScript 3.7</h1><div class="container_iZB2 margin-vert--md"><time datetime=2019-11-05T10:00:00.000Z>November 5, 2019</time> ¬∑ <!-- -->9 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_v1VX"><div class="avatar margin-bottom--sm"><div class="avatar__intro authorDetails_W4s3"><div class=avatar__name><a href=https://twitter.com/NicoloRibaudo target=_blank rel="noopener noreferrer"><span class=authorName_Tejg>Nicol√≤ Ribaudo</span></a></div><div class=authorSocials_VbIH></div></div></div></div></div></header><div id=__blog-post-container class=markdown><p>Today we are releasing Babel 7.7.0!</p>
<p>This release includes new parser features like top-level await (<code>await x()</code>, <a href=https://github.com/tc39/proposal-top-level-await target=_blank rel="noopener noreferrer">Stage 3</a>) and Flow <code>enum</code> declarations (<a href=https://github.com/gkz/enums target=_blank rel="noopener noreferrer">Flow proposal</a>). And now, <code>@babel/parser</code> has the option of recovering from certain syntax errors!</p>
<p>We've also added support for <a href=https://devblogs.microsoft.com/typescript/announcing-typescript-3-7-rc/ target=_blank rel="noopener noreferrer">TypeScript 3.7</a>: Babel can parse and transform private class fields with type annotations, public class fields annotations defined using the <code>declare</code> keyword, type assertion function signatures and template literals in <code>enum</code> declarations.</p>
<p>Babel now understands three new configuration files: <code>babel.config.json</code>, <code>babel.config.cjs</code> and <code>.babelrc.cjs</code>, which behave the same as <code>babel.config.js</code> and <code>.babelrc.js</code> files.</p>
<p>Lastly, Babel 7.7.0 uses 20% less memory than 7.6.0.</p>
<p>You can read the whole changelog <a href=https://github.com/babel/babel/releases/tag/v7.7.0 target=_blank rel="noopener noreferrer">on GitHub</a>.</p>
<hr>
<p>Shoutout to <a href=https://github.com/alejo90 target=_blank rel="noopener noreferrer">Alejandro S√°nchez</a>, <a href=https://github.com/pzuraq target=_blank rel="noopener noreferrer">Chris Garrett</a>, <a href=https://github.com/chris-peng-1244 target=_blank rel="noopener noreferrer">ÂΩ≠È©∞</a>, <a href=https://github.com/DanArthurGallagher target=_blank rel="noopener noreferrer">Daniel Arthur Gallagher</a>, <a href=https://twitter.com/ExE_Boss target=_blank rel="noopener noreferrer">ExE-Boss</a>, <a href=https://github.com/t0lkman target=_blank rel="noopener noreferrer">Eugene Myunster</a>, <a href=https://github.com/thorn0 target=_blank rel="noopener noreferrer">Georgii Dolzhykov</a>, <a href=https://twitter.com/gera2ld target=_blank rel="noopener noreferrer">Gerald</a>, <a href=https://github.com/LinusU target=_blank rel="noopener noreferrer">Linus Unneb√§ck</a>, <a href=https://github.com/dentrado target=_blank rel="noopener noreferrer">Martin Forsgren</a>, <a href=https://github.com/mwhitworth target=_blank rel="noopener noreferrer">Matthew Whitworth</a>, <a href=https://github.com/MicahZoltu target=_blank rel="noopener noreferrer">Micah Zoltu</a>, <a href=https://github.com/m-ahmadi target=_blank rel="noopener noreferrer">Mohammad Ahmadi</a> and <a href=https://github.com/samMeow target=_blank rel="noopener noreferrer">Samuel Kwok</a> for their first PRs!</p>
<p>This release has also been made possible thanks to collaboration with teams of other open source projects: thanks to <a href=https://twitter.com/devongovett target=_blank rel="noopener noreferrer">Devon Govett</a> (<a href=https://parceljs.org/ target=_blank rel="noopener noreferrer">Parcel</a>) for implementing support for <code>babel.config.json</code> files, and to <a href=https://twitter.com/gkzahariev target=_blank rel="noopener noreferrer">George Zahariev</a> (<a href=https://flow.org/ target=_blank rel="noopener noreferrer">Flow</a>) for adding Flow <code>enum</code> declarations to <code>@babel/parser</code>!</p>
<p>Another special thanks goes to <a href=https://www.techatbloomberg.com/ target=_blank rel="noopener noreferrer">Bloomberg</a> for organizing an Open Source Hackaton to encourage their engineers to give back to the community! In particular, <a href=https://twitter.com/r_ricard target=_blank rel="noopener noreferrer">Robin Ricard</a> and <a href=https://twitter.com/jbhoosreddy target=_blank rel="noopener noreferrer">Jaideep Bhoosreddy</a> who are actively working on automating the testing of Babel transforms against the <a href=https://github.com/tc39/test262 target=_blank rel="noopener noreferrer">Test262 suite</a>.</p>
<p>If you or your company want to support Babel and the evolution of JavaScript, but aren't sure how, you can donate to us on <a href=https://opencollective.com/babel target=_blank rel="noopener noreferrer">OpenCollective</a> and, better yet, work with us on the implementation of <a href=https://github.com/babel/proposals target=_blank rel="noopener noreferrer">new ECMAScript proposals</a> directly! As a volunteer-driven project, we rely on the community's support to both fund our efforts in supporting the wide range of JavaScript users and taking ownership of the code. Reach out to Henry at <a href=mailto:henry@babeljs.io target=_blank rel="noopener noreferrer">henry@babeljs.io</a> if you'd like to talk more!</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=top-level-await-parsing-10449>Top-level <code>await</code> parsing (<a href=https://github.com/babel/babel/pull/10449 target=_blank rel="noopener noreferrer">#10449</a>)<a href=#top-level-await-parsing-10449 class=hash-link aria-label="Direct link to top-level-await-parsing-10449" title="Direct link to top-level-await-parsing-10449">‚Äã</a></h2>
<p>The top-level <code>await</code> <a href=https://github.com/tc39/proposal-top-level-await target=_blank rel="noopener noreferrer">proposal</a> allows you to <code>await</code> promises in modules as if they were wrapped in a big async function. This is useful, for example, to conditionally load a dependency or to perform app initialization:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_x_ju>JavaScript</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token comment" style=color:#8e908c>// Dynamic dependency path</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token keyword" style=color:#8959a8>const</span><span class="token plain"> strings </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword control-flow" style=color:#8959a8>await</span><span class="token plain"> </span><span class="token keyword module" style=color:#8959a8>import</span><span class="token punctuation">(</span><span class="token template-string template-punctuation string" style=color:#718c00>`</span><span class="token template-string string" style=color:#718c00>./i18n/</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation dom variable" style=color:#c82829>navigator</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation property-access">language</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string" style=color:#718c00>.mjs</span><span class="token template-string template-punctuation string" style=color:#718c00>`</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token comment" style=color:#8e908c>// Resource initialization</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token keyword" style=color:#8959a8>const</span><span class="token plain"> connection </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword control-flow" style=color:#8959a8>await</span><span class="token plain"> </span><span class="token function" style=color:#4271ae>dbConnector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><code>@babel/parser</code> has supported using <code>await</code> outside of async functions via the <code>allowAwaitOutsideFunction</code> option since version 7.0.0.</p>
<p>Version 7.7.0 introduces a new <code>topLevelAwait</code> parser plugin, which has a few key differences:</p>
<ul>
<li>It only allows top-level <code>await</code> inside modules and not inside scripts, as the proposal mandates. This is needed because synchronous script-based module systems (like CommonJS) cannot support an async dependency.</li>
<li>It allows to detect the correct <code>sourceType</code> when <code>sourceType: "unambiguous"</code> is used. Note that, since <code>await</code> is a valid identifier in scripts, many constructs which may seem unambiguously modules are actually ambiguous and Babel will parse them as scripts.
For example, <code>await -1</code> could either be an await expression which waits for <code>-1</code>, or a difference between <code>await</code> and <code>1</code>.</li>
</ul>
<p>If you are using <code>@babel/parser</code> directly, you can enable the <code>topLevelAwait</code> plugin:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_x_ju>JavaScript</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token plain">parser</span><span class="token punctuation">.</span><span class="token method function property-access" style=color:#4271ae>parse</span><span class="token punctuation">(</span><span class="token plain">inputCode</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string" style=color:#718c00>"topLevelAwait"</span><span class="token punctuation">]</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>We also created the <code>@babel/plugin-syntax-top-level-await</code> package, which you can add to your Babel configuration:</p>
<div class="language-javascript codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-javascript codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">module</span><span class="token punctuation">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    </span><span class="token string" style=color:#718c00>"@babel/plugin-syntax-top-level-await"</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token punctuation">]</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token punctuation">}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Please note that usage of top-level <code>await</code> assumes support within your module bundler. Babel itself isn't doing transformations: if you are using Rollup you can enable the <a href=https://rollupjs.org/guide/en/#experimentaltoplevelawait target=_blank rel="noopener noreferrer"><code>experimentalTopLevelAwait</code></a> option, and webpack 5 supports the <a href=https://github.com/webpack/webpack/releases/tag/v5.0.0-alpha.15 target=_blank rel="noopener noreferrer"><code>experiments.topLevelAwait</code></a> option.</p>
<p>Starting from this release, <code>@babel/preset-env</code> will automatically enable <code>@babel/plugin-syntax-top-level-await</code> if the <code>caller</code> supports it. <em>Note</em>: <code>babel-loader</code> and <code>rollup-plugin-babel</code> don't yet tell Babel that they support this syntax, but we are working on it with the respective maintainers.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=parser-error-recovery-10363>Parser error recovery (<a href=https://github.com/babel/babel/pull/10363 target=_blank rel="noopener noreferrer">#10363</a>)<a href=#parser-error-recovery-10363 class=hash-link aria-label="Direct link to parser-error-recovery-10363" title="Direct link to parser-error-recovery-10363">‚Äã</a></h2>
<p>Like many other JavaScript parsers, <code>@babel/parser</code> throws an error whenever some invalid syntax is encountered. This behavior works well for Babel, since in order to transform a JavaScript program to another program we must first be sure that the input is valid.</p>
<p>Given Babel's popularity, there are many other tools relying on <code>@babel/parser</code>: above all <code>babel-eslint</code> and Prettier. For both these tools, a parser which bails out on the first error is suboptimal.</p>
<p>Consider this code, which is invalid because of the duplicated <code>__proto__</code> property:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_x_ju>JavaScript</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token keyword" style=color:#8959a8>let</span><span class="token plain"> a </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token literal-property property">__proto__</span><span class="token operator">:</span><span class="token plain"> x</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token literal-property property">__proto__</span><span class="token operator">:</span><span class="token plain"> y</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token keyword" style=color:#8959a8>let</span><span class="token plain"> a </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number" style=color:#f5871f>2</span><span class="token punctuation">;</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>The current workflow with ESLint and Prettier is the following:</p>
<ol>
<li>Prettier can't format the file</li>
<li>ESLint reports an <code>Redefinition of __proto__ property</code> parser error</li>
<li>You remove the second <code>__proto__</code> property</li>
<li>Prettier can't format the file</li>
<li>ESLint reports an <code>Identifier 'a' has already been declared</code> error</li>
<li>You remove the second <code>let</code> keyword</li>
<li>Prettier formats the file</li>
</ol>
<p>Wouldn't it better if it was more like this?</p>
<ol>
<li>Prettier formats the file</li>
<li>ESLint reports two errors: <code>Redefinition of __proto__ property</code> and <code>Identifier 'a' has already been declared</code></li>
<li>You remove the second <code>__proto__</code> property and the second <code>let</code> keyword</li>
</ol>
<p>In this release, we are adding a new option to <code>@babel/parser</code>: <code>errorRecovery</code>. When it is set to true, the resulting AST will have an <code>errors</code> property containing all the errors which <code>@babel/parser</code> was able to recover from:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_x_ju>JavaScript</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token keyword" style=color:#8959a8>const</span><span class="token plain"> input </span><span class="token operator">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style=color:#718c00>`</span><span class="token template-string string" style=color:#718c00></span><br></span><span class=token-line style=color:#4d4d4c><span class="token template-string string" style=color:#718c00>let a = {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token template-string string" style=color:#718c00>  __proto__: x,</span><br></span><span class=token-line style=color:#4d4d4c><span class="token template-string string" style=color:#718c00>  __proto__: y</span><br></span><span class=token-line style=color:#4d4d4c><span class="token template-string string" style=color:#718c00>}</span><br></span><span class=token-line style=color:#4d4d4c><span class="token template-string string" style=display:inline-block;color:#718c00></span><br></span><span class=token-line style=color:#4d4d4c><span class="token template-string string" style=color:#718c00>let a = 2;</span><br></span><span class=token-line style=color:#4d4d4c><span class="token template-string string" style=color:#718c00></span><span class="token template-string template-punctuation string" style=color:#718c00>`</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">parser</span><span class="token punctuation">.</span><span class="token method function property-access" style=color:#4271ae>parse</span><span class="token punctuation">(</span><span class="token plain">input</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment" style=color:#8e908c>// Throws "Redefinition of __proto__ property"</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token keyword" style=color:#8959a8>const</span><span class="token plain"> ast </span><span class="token operator">=</span><span class="token plain"> parser</span><span class="token punctuation">.</span><span class="token method function property-access" style=color:#4271ae>parse</span><span class="token punctuation">(</span><span class="token plain">input</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token literal-property property">errorRecovery</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean" style=color:#f5871f>true</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">ast</span><span class="token punctuation">.</span><span class="token property-access">errors</span><span class="token plain"> </span><span class="token operator">==</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token known-class-name class-name" style=color:#eab700>SyntaxError</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style=color:#718c00>"Redefinition of __proto__ property"</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token known-class-name class-name" style=color:#eab700>SyntaxError</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style=color:#718c00>"Identifier 'a' has already been declared"</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token punctuation">]</span><span class="token punctuation">;</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><code>@babel/parser</code> can still throw as not every error is currently recoverable. We'll continue to improve these cases!</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=new-configuration-file-extensions-10501-10599>New configuration file extensions (<a href=https://github.com/babel/babel/pull/10501 target=_blank rel="noopener noreferrer">#10501</a>, <a href=https://github.com/babel/babel/pull/10599 target=_blank rel="noopener noreferrer">#10599</a>)<a href=#new-configuration-file-extensions-10501-10599 class=hash-link aria-label="Direct link to new-configuration-file-extensions-10501-10599" title="Direct link to new-configuration-file-extensions-10501-10599">‚Äã</a></h2>
<p>Babel 6 only supported a single configuration file: <code>.babelrc</code>, whose contents must be specified using JSON.</p>
<p>Babel 7 changed the meaning of <code>.babelrc</code>s and introduced two new configuration files: <code>babel.config.js</code> and <code>.babelrc.js</code> (you can read about the difference between them in the <a href=https://babeljs.io/docs/en/config-files target=_blank rel="noopener noreferrer">docs</a>). We added configuration files with JavaScript to allow defining your own logic when enabling/disabling plugins/options.</p>
<p>However a big benefit of JSON files is easier <em>cacheability</em>. The same JavaScript file can produce different values when called two times, while a JSON file is guaranteed to always evaluate to the same object. Also, JSON configurations are easily serializable, while it's not possible to serialize JavaScript values like functions or JavaScript objects with implicit data or relationships.</p>
<p>Note that Babel also caches transforms when using JavaScript-based configurations, but the config file must be evaluated (in order to know if the cache is still valid) and the cache <a href=https://babeljs.io/docs/en/config-files#apicache target=_blank rel="noopener noreferrer">manually configured</a>.</p>
<p>For these reasons, Babel 7.7.0 introduces support for a new configuration file: <code>babel.config.json</code>, whose behavior is the same as <code>babel.config.js</code>.</p>
<p>We also added support for two different configuration files: <code>babel.config.cjs</code> and <code>.babelrc.cjs</code>, which must be used when using node's <a href=https://nodejs.org/api/esm.html#esm_code_package_json_code_code_type_code_field target=_blank rel="noopener noreferrer"><code>"type": "module"</code></a> option in <code>package.json</code> (because Babel doesn't support ECMAScript modules in config files). Apart from this <code>"type": "module"</code> difference, they behave exactly like <code>babel.config.js</code> and <code>.babelrc.js</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=typescript-37-10543-10545>TypeScript 3.7 (<a href=https://github.com/babel/babel/pull/10543 target=_blank rel="noopener noreferrer">#10543</a>, <a href=https://github.com/babel/babel/pull/10545 target=_blank rel="noopener noreferrer">#10545</a>)<a href=#typescript-37-10543-10545 class=hash-link aria-label="Direct link to typescript-37-10543-10545" title="Direct link to typescript-37-10543-10545">‚Äã</a></h2>
<p><a href=https://devblogs.microsoft.com/typescript/announcing-typescript-3-7-rc target=_blank rel="noopener noreferrer">TypeScript 3.7 RC</a> includes support for optional chaining, nullish coalescing operator, assertion functions, type-only field declarations and many more type-related features.</p>
<p>Optional chaining (<code>a?.b</code>) and nullish coalescing (<code>a ?? b</code>) have been supported in Babel since 7.0.0 via <code>@babel/plugin-proposal-optional-chaining</code> and <code>@babel/plugin-proposal-nullish-coalescing-operator</code>.</p>
<p>In Babel 7.7.0, you can now use assertion functions and <code>declare</code> in class fields:</p>
<div class="language-typescript codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-typescript codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token keyword" style=color:#8959a8>function</span><span class="token plain"> </span><span class="token function" style=color:#4271ae>assertString</span><span class="token punctuation">(</span><span class="token plain">x</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token plain"> assert x </span><span class="token keyword" style=color:#8959a8>is</span><span class="token plain"> </span><span class="token builtin" style=color:#f5871f>string</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token keyword" style=color:#8959a8>if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword" style=color:#8959a8>typeof</span><span class="token plain"> x </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string" style=color:#718c00>"string"</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword" style=color:#8959a8>throw</span><span class="token plain"> </span><span class="token keyword" style=color:#8959a8>new</span><span class="token plain"> </span><span class="token class-name" style=color:#eab700>Error</span><span class="token punctuation">(</span><span class="token string" style=color:#718c00>"It must be a string!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token keyword" style=color:#8959a8>class</span><span class="token plain"> </span><span class="token class-name" style=color:#eab700>Developer</span><span class="token plain"> </span><span class="token keyword" style=color:#8959a8>extends</span><span class="token plain"> </span><span class="token class-name" style=color:#eab700>Person</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token keyword" style=color:#8959a8>declare</span><span class="token plain"> usingBabel</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style=color:#f5871f>boolean</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token punctuation">}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>To avoid breaking changes, we introduced support for <code>declare</code> in class fields behind a flag: <code>"allowDeclareFields"</code>, supported by both <code>@babel/plugin-transform-typescript</code> and <code>@babel/preset-typescript</code>. This will likely become default behavior, so it is recommended that you migrate your config to use it:</p>
<div class="language-jsonld codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-jsonld codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token plain">{</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  "presets": [</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    ["@babel/preset-typescript", {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">      "allowDeclareFields": true</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    }]</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  ]</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=use-object-spread-in-compiled-jsx-10572>Use object spread in compiled JSX (<a href=https://github.com/babel/babel/pull/10572 target=_blank rel="noopener noreferrer">#10572</a>)<a href=#use-object-spread-in-compiled-jsx-10572 class=hash-link aria-label="Direct link to use-object-spread-in-compiled-jsx-10572" title="Direct link to use-object-spread-in-compiled-jsx-10572">‚Äã</a></h2>
<p>When using spread properties in JSX elements, Babel injects a runtime helper by default:</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_x_ju>JSX</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token tag punctuation" style=color:#c82829>&lt;</span><span class="token tag" style=color:#c82829>a</span><span class="token tag" style=color:#c82829> </span><span class="token tag attr-name" style=color:#4271ae>x</span><span class="token tag" style=color:#c82829> </span><span class="token tag spread punctuation" style=color:#c82829>{</span><span class="token tag spread operator" style=color:#c82829>...</span><span class="token tag spread" style=color:#c82829>y</span><span class="token tag spread punctuation" style=color:#c82829>}</span><span class="token tag" style=color:#c82829> </span><span class="token tag punctuation" style=color:#c82829>/></span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token comment" style=color:#8e908c>// ü°á ü°á ü°á</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token keyword" style=color:#8959a8>function</span><span class="token plain"> </span><span class="token function" style=color:#4271ae>_extends</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> _extends </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name" style=color:#eab700>Object</span><span class="token punctuation">.</span><span class="token property-access">assign</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token keyword" style=color:#8959a8>function</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter" style=color:#f5871f>target</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token keyword control-flow" style=color:#8959a8>for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword" style=color:#8959a8>var</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number" style=color:#f5871f>1</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> arguments</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span><span class="token plain"> i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token keyword" style=color:#8959a8>var</span><span class="token plain"> source </span><span class="token operator">=</span><span class="token plain"> arguments</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token keyword control-flow" style=color:#8959a8>for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword" style=color:#8959a8>var</span><span class="token plain"> key </span><span class="token keyword" style=color:#8959a8>in</span><span class="token plain"> source</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token keyword control-flow" style=color:#8959a8>if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token class-name" style=color:#eab700>Object</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token method function property-access" style=color:#4271ae>hasOwnProperty</span><span class="token punctuation">.</span><span class="token method function property-access" style=color:#4271ae>call</span><span class="token punctuation">(</span><span class="token plain">source</span><span class="token punctuation">,</span><span class="token plain"> key</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> target</span><span class="token punctuation">[</span><span class="token plain">key</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> source</span><span class="token punctuation">[</span><span class="token plain">key</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword control-flow" style=color:#8959a8>return</span><span class="token plain"> target</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token keyword control-flow" style=color:#8959a8>return</span><span class="token plain"> _extends</span><span class="token punctuation">.</span><span class="token method function property-access" style=color:#4271ae>apply</span><span class="token punctuation">(</span><span class="token keyword" style=color:#8959a8>this</span><span class="token punctuation">,</span><span class="token plain"> arguments</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access" style=color:#4271ae>createElement</span><span class="token punctuation">(</span><span class="token string" style=color:#718c00>"a"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token function" style=color:#4271ae>_extends</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token literal-property property">x</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean" style=color:#f5871f>true</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> y</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>In 2016, as support for native ES6 improved, we added the <code>useBuiltIns</code> option to <code>@babel/plugin-transform-react-jsx</code> which allowed the compiled output to directly use <code>Object.assign</code> and removed excess code:</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_x_ju>JSX</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token tag punctuation" style=color:#c82829>&lt;</span><span class="token tag" style=color:#c82829>a</span><span class="token tag" style=color:#c82829> </span><span class="token tag attr-name" style=color:#4271ae>x</span><span class="token tag" style=color:#c82829> </span><span class="token tag spread punctuation" style=color:#c82829>{</span><span class="token tag spread operator" style=color:#c82829>...</span><span class="token tag spread" style=color:#c82829>y</span><span class="token tag spread punctuation" style=color:#c82829>}</span><span class="token tag" style=color:#c82829> </span><span class="token tag punctuation" style=color:#c82829>/></span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token comment" style=color:#8e908c>// ü°á ü°á ü°á</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access" style=color:#4271ae>createElement</span><span class="token punctuation">(</span><span class="token string" style=color:#718c00>"a"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token known-class-name class-name" style=color:#eab700>Object</span><span class="token punctuation">.</span><span class="token method function property-access" style=color:#4271ae>assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token literal-property property">x</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean" style=color:#f5871f>true</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> y</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>However given the native support for object spread, it allows us to produce even more optimized code:</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_x_ju>JSX</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token tag punctuation" style=color:#c82829>&lt;</span><span class="token tag" style=color:#c82829>a</span><span class="token tag" style=color:#c82829> </span><span class="token tag attr-name" style=color:#4271ae>x</span><span class="token tag" style=color:#c82829> </span><span class="token tag spread punctuation" style=color:#c82829>{</span><span class="token tag spread operator" style=color:#c82829>...</span><span class="token tag spread" style=color:#c82829>y</span><span class="token tag spread punctuation" style=color:#c82829>}</span><span class="token tag" style=color:#c82829> </span><span class="token tag punctuation" style=color:#c82829>/></span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token comment" style=color:#8e908c>// ü°á ü°á ü°á</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access" style=color:#4271ae>createElement</span><span class="token punctuation">(</span><span class="token string" style=color:#718c00>"a"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token literal-property property">x</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean" style=color:#f5871f>true</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token spread operator">...</span><span class="token plain">y </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>You can enable it using the <code>useSpread</code> option with either <code>@babel/preset-react</code> or <code>@babel/plugin-transform-react-jsx</code>:</p>
<div class="language-jsonld codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-jsonld codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token plain">{</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  presets: [</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    ["@babel/react", { useSpread: true }]</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  ]</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=memory-usage-improvements-10480>Memory usage improvements (<a href=https://github.com/babel/babel/pull/10480 target=_blank rel="noopener noreferrer">#10480</a>)<a href=#memory-usage-improvements-10480 class=hash-link aria-label="Direct link to memory-usage-improvements-10480" title="Direct link to memory-usage-improvements-10480">‚Äã</a></h2>
<p>Since the beginning, we have been making efforts (<a href=https://github.com/babel/babel/pull/433 target=_blank rel="noopener noreferrer">#433</a>, <a href=https://github.com/babel/babel/pull/3475 target=_blank rel="noopener noreferrer">#3475</a>, <a href=https://github.com/babel/babel/pull/7028 target=_blank rel="noopener noreferrer">#7028</a>, etc.) to improve performance. Babel 7.7.0 now uses 20% less memory, and transforms large files 8% faster when compared to 7.6.0.</p>
<p>In order to achieve these results, we optimized different operations done during the lifetime <code>NodePath</code> objects (used to wrap every AST node):</p>
<ol>
<li>
<p>We now avoid initializing some rarely used object properties until they are needed, allowing us to avoid an <code>Object.create(null)</code> allocation for almost every AST node.</p>
</li>
<li>
<p>We reduced bookkeeping workload for every single node visit, by replacing a few uncommon properties with getters so that <code>@babel/traverse</code> can skip updating them.</p>
</li>
<li>
<p>We optimized memory usage by compressing several boolean properties used to represent the status of a node traversal (i.e. skipped, stopped or removed) into a <a href=https://en.wikipedia.org/wiki/Bit_array target=_blank rel="noopener noreferrer">bit array</a>.</p>
</li>
</ol>
<p>All these improvements add up to the following difference in transform performance and memory usage:</p>
<table><thead><tr><th style=text-align:center>Performance<th style=text-align:center>Memory usage<tbody><tr><td style=text-align:center><img decoding=async loading=lazy src=https://i.imgur.com/bs3DoOX.png alt="" class=img_SS3x><td style=text-align:center><img decoding=async loading=lazy src=https://i.imgur.com/n1bQSj1.png alt="" class=img_SS3x></table>
<p>You can also checkout the <a href="https://docs.google.com/spreadsheets/d/1lFUKviJwJP83SulEG7tHoaHO4bvxPt1u2UrEySrPAXc/edit?usp=sharing" target=_blank rel="noopener noreferrer">raw data</a> of the charts above. If you want to read more about this topic, you can read <a href=https://hackmd.io/@VQ5Lhi9URomRC0KamZdyvw/ryuUaFGwS target=_blank rel="noopener noreferrer">J√πnli√†ng's detailed write-up</a> about the changes he made to get those improvements!</div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href=/blog/2019/11/08/babels-funding-plans><div class=pagination-nav__sublabel>Newer post</div><div class=pagination-nav__label>Babel's Funding Plans</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/blog/2019/09/05/7.6.0><div class=pagination-nav__sublabel>Older post</div><div class=pagination-nav__label>7.6.0 Released: Private static accessors and V8 intrinsic syntax</div></a></nav></main><div class="col col--2"><div class="tableOfContents_XG6w thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#top-level-await-parsing-10449 class="table-of-contents__link toc-highlight">Top-level <code>await</code> parsing (#10449)</a><li><a href=#parser-error-recovery-10363 class="table-of-contents__link toc-highlight">Parser error recovery (#10363)</a><li><a href=#new-configuration-file-extensions-10501-10599 class="table-of-contents__link toc-highlight">New configuration file extensions (#10501, #10599)</a><li><a href=#typescript-37-10543-10545 class="table-of-contents__link toc-highlight">TypeScript 3.7 (#10543, #10545)</a><li><a href=#use-object-spread-in-compiled-jsx-10572 class="table-of-contents__link toc-highlight">Use object spread in compiled JSX (#10572)</a><li><a href=#memory-usage-improvements-10480 class="table-of-contents__link toc-highlight">Memory usage improvements (#10480)</a></ul></div></div></div></div></div><footer class=nav-footer id=footer><section class=sitemap><a class=nav-home href=/><img src=https://d33wubrfki0l68.cloudfront.net/7a197cfe44548cc1a3f581152af70a3051e11671/78df8/img/babel.svg alt=Babel width=66 height=58></a><div><h5>Docs</h5><a href=/docs/learn>Learn ES2015</a></div><div><h5>Community</h5><a href=/videos>Videos</a><a href=/users>User Showcase</a><a href=http://stackoverflow.com/questions/tagged/babeljs target=_blank rel="noopener noreferrer">Stack Overflow</a><a href=https://babeljs.slack.com/ target=_blank rel="noopener noreferrer">Slack Channel</a><a href=https://x.com/babeljs target=_blank rel="noopener noreferrer">X (Twitter)</a><a href=https://bsky.app/profile/babel.dev target=_blank rel="noopener noreferrer">Bluesky</a></div><div><h5>More</h5><a href=/blog>Blog</a><a href=https://github.com/babel target=_blank rel="noopener noreferrer">GitHub Org</a><a href=https://github.com/babel/babel target=_blank rel="noopener noreferrer">GitHub Repo</a><a href=https://github.com/babel/website target=_blank rel="noopener noreferrer">Website Repo</a><a href=https://old.babeljs.io target=_blank rel="noopener noreferrer">Old 6.x Site</a><a href=http://henryzoo.com/babel.github.io target=_blank rel="noopener noreferrer">Old 5.x Site</a></div></section></footer></div>