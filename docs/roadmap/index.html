<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-roadmap" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.7.0"><title data-rh=true>Babel Roadmap · Babel</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://babel.qubitpi.org/docs/roadmap><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="Babel Roadmap · Babel"><meta data-rh=true name=description content="This document outlines some of the improvements our team members would like to work on during this year."><meta data-rh=true property=og:description content="This document outlines some of the improvements our team members would like to work on during this year."><link data-rh=true rel=icon href=/img/favicon.png><link data-rh=true rel=canonical href=https://babel.qubitpi.org/docs/roadmap><link data-rh=true rel=alternate href=https://babel.qubitpi.org/docs/roadmap hreflang=en><link data-rh=true rel=alternate href=https://babel.qubitpi.org/docs/roadmap hreflang=x-default><link data-rh=true rel=preconnect href=https://M7KGJDK6WF-dsn.algolia.net crossorigin=anonymous><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="Babel RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="Babel Atom Feed"><link rel=search type=application/opensearchdescription+xml title=Babel href=/opensearch.xml><script src=https://unpkg.com/@babel/standalone@^7.0.0/babel.min.js defer></script><script src=/js/components/mini-repl.js type=module></script><script src=/js/components/assumption-repl.js type=module></script><link rel=stylesheet href=/assets/css/styles.d49a075b.css><script src=/assets/js/runtime~main.2aef8a11.js defer></script><script src=/assets/js/main.88dc2edb.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":(window.matchMedia("(prefers-color-scheme: light)").matches,"light"),document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/babel.svg alt="Babel logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/img/babel.svg alt="Babel logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a></div><div class="navbar__items navbar__items--right"><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/docs/>Docs</a><a class="navbar__item navbar__link" href=/setup>Setup</a><a class="navbar__item navbar__link" href=/repl>Try it out</a><a class="navbar__item navbar__link" href=/videos/>Videos</a><a class="navbar__item navbar__link" href=/blog>Blog</a><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div><a href=https://opencollective.com/babel target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Donate<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><a class="navbar__item navbar__link" href=/team>Team</a><a href=https://github.com/babel/babel target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live=polite aria-pressed=false><svg viewBox="0 0 24 24" width=24 height=24 class=lightToggleIcon_pyhR><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 class=darkToggleIcon_wfgR><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/>Guides</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/config-files>Config Reference</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/presets>Presets</a><button aria-label="Expand sidebar category 'Presets'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true href=/docs/roadmap>Misc</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/docs/roadmap>Roadmap</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/caveats>Caveats</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/features-timeline>Features Timeline</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/faq>FAQ</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/editors>Editors</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/babel-cli>Integration Packages</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/babel-parser>Tooling Packages</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/babel-helper-compilation-targets>Helper Packages</a></div></ul></nav><button type=button title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width=20 height=20 aria-hidden=true class=collapseSidebarButtonIcon_kv0_><g fill=#7a7a7a><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"/><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"/></g></svg></button></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><span class=breadcrumbs__link>Misc</span><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>Roadmap</span><meta itemprop=position content=2></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Babel Roadmap</h1></header><p>This document outlines some of the improvements our team members would like to work on during this year.</p>
<p>This is far from being a complete list of all the new features or important changes that we'll bring to Babel, but it's a good summary if you are interested in the general direction that the project is moving toward. We may not actually finish every listed point or may delay some of them to the next year. Some of them have clear starting and ending points, while others need more research or <a href=https://github.com/babel/rfcs target=_blank rel="noopener noreferrer">RFCs</a>.</p>
<p>If your company is interested and would like to directly sponsor any particular item please <a href=mail:team@babeljs.io target=_blank rel="noopener noreferrer">reach out</a>!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=babel-2021-roadmap>Babel 2021 Roadmap<a href=#babel-2021-roadmap class=hash-link aria-label="Direct link to Babel 2021 Roadmap" title="Direct link to Babel 2021 Roadmap">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=babel-8>Babel 8<a href=#babel-8 class=hash-link aria-label="Direct link to Babel 8" title="Direct link to Babel 8">​</a></h3>
<p>We have been talking about the Babel 8 release for more than one year (we initially scheduled it about one year ago)! However, we are now closer then ever to its release!</p>
<p>Most of the remaining tasks are in the <a href=https://github.com/babel/babel/issues/10746 target=_blank rel="noopener noreferrer">tracking issue</a>, but there are still a few blockers:</p>
<ul>
<li>We want to drop support for <a href=https://github.com/nodejs/Release target=_blank rel="noopener noreferrer">Node.js 10</a>, which stops being maintained on 2021-04-30.</li>
<li>We would like to release Babel as a pure ESM package. We are now in the process of converting our sources to be compatible with Node.js' ESM implementation, and while doing so, we are examining how we can make it easier for people that currently use Babel to compile ESM to CJS.</li>
<li>We are trying to align our TypeScript AST with the <a href=https://github.com/typescript-eslint/typescript-eslint/ target=_blank rel="noopener noreferrer"><code>typescript-eslint</code></a> project. Our ASTs are <em>almost</em> identical, but we need to introduce some small breaking changes to fully align.</li>
<li>Our release infrastructure doesn't support yet pre-releases, or using multiple "main" branches (one for Babel 8 and one for Babel 7).</li>
<li>We haven't figured out yet a policy for Babel 7 maintenance.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=implement-new-tc39-proposals>Implement new TC39 proposals<a href=#implement-new-tc39-proposals class=hash-link aria-label="Direct link to Implement new TC39 proposals" title="Direct link to Implement new TC39 proposals">​</a></h3>
<p>Babel can currently parse all the Stage 3 proposals, and we can transform all of them except for top-level await, import assertions and JSON modules (which are best handled by bundlers working with the dependencies graph).</p>
<p>We support all the Stage 2 proposals except for:</p>
<ul>
<li>The new iteration of the decorators proposal (we need to implement both parsing and transform);</li>
<li>Transform for the Module Blocks proposal (we implemented parsing in Babel 7.13.0).</li>
</ul>
<p>We will implement support for decorators, and investigate if and how we can implement a transform for module blocks.</p>
<p>While we don't support many Stage 1 proposals, there have been recent updates to the pipeline operator and to do expressions. Since we already support those proposals and the community is quite excited about them, we will update our implementations.</p>
<p>There are also other proposals (such as pattern matching) that we have not yet implemented because their champions expect to do significant changes to the syntax and semantics. However, we are closely following their development, and will implement them in Babel as soon as they stabilize a bit.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=move-babelpreset-env-into-babelcore>Move <code>@babel/preset-env</code> into <code>@babel/core</code><a href=#move-babelpreset-env-into-babelcore class=hash-link aria-label="Direct link to move-babelpreset-env-into-babelcore" title="Direct link to move-babelpreset-env-into-babelcore">​</a></h3>
<p>A minimal Babel transforming setup requires at least three packages:</p>
<ul>
<li><code>@babel/core</code></li>
<li><code>@babel/preset-env</code></li>
<li>a Babel "runner" (<code>@babel/cli</code>, <code>babel-loader</code>, <code>@rollup/plugin-babel</code>, etc)</li>
</ul>
<p>Moving <code>@babel/preset-env</code> directly into <code>@babel/core</code> has two big advantages:</p>
<ul>
<li>It will be easier to configure Babel in simple projects, you would only need to enable a <code>compileJS: true</code> option in <code>babel.config.json</code> (or it could even be the default in the future -- it can't be default as <code>@babel/eslint-parser</code> does not compile the source)</li>
<li>It will make sure that the plugin versions are in sync with the <code>@babel/core</code> version, avoiding most of the bugs caused by mismatched/incompatible packages versions</li>
<li>When we move to ESM, it will be hard to resolve and load plugin synchronously in <code>transformSync</code>. This prevents it from being a problem.</li>
</ul>
<p>There is already <a href=https://github.com/babel/rfcs/pull/10 target=_blank rel="noopener noreferrer">a RFC</a> to move <em>plugins</em> for stable ECMAScript features in <code>@babel/core</code>, which is the first step in this direction.</p>
<p>With our current <code>@babel/preset-env</code> architecture, we would need to specially handle official plugins to automatically enable or disable them based on <code>targets</code>.
However, this has two drawbacks:</p>
<ul>
<li>Compatibility data for a specific plugin is completely separated from the plugin implementation (it's not even a dependency, more something like an internal implicit peer dependency: plugin -> @babel/core -> @babel/compat-data);</li>
<li>Official plugins would get special treatment from <code>@babel/core</code>, but we want to make sure that third-party plugins have the same capabilities as official plugins.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=continue-developing-the-babel-polyfills-project>Continue developing the <code>babel-polyfills</code> project<a href=#continue-developing-the-babel-polyfills-project class=hash-link aria-label="Direct link to continue-developing-the-babel-polyfills-project" title="Direct link to continue-developing-the-babel-polyfills-project">​</a></h3>
<p>We have already decided to remove the older <code>core-js@2</code> support from <code>@babel/preset-env</code> in Babel 8. We also want to stop promoting a specific third-party polyfill, which might give our users the impression that it's part of Babel itself.</p>
<p>This might happen in two different ways:</p>
<ul>
<li>We just remove <code>core-js@3</code> from <code>@babel/preset-env</code> in Babel 8, encouraging users to migrate to <code>babel-plugin-polyfill-corejs3</code> (which is what <code>@babel/preset-env</code> internally uses starting from version 7.10.0)</li>
<li>We can keep <code>core-js@3</code> support in <code>@babel/preset-env</code>, but not migrate it to <code>@babel/core</code> when we'll move the transform plugins.</li>
</ul>
<p>Whichever path we take, we would like to offer at least one alternative to our users when they'll need to update the <code>core-js</code> integration in their configuration. <code>core-js</code> is a really good polyfill that ensures the highest possible spec compliancy, but users may prefer different trade-offs.</p>
<p>(<a href=https://github.com/nicolo-ribaudo target=_blank rel="noopener noreferrer">Nicolò</a>) is working with <a href=https://github.com/ljharb target=_blank rel="noopener noreferrer">@ljharb</a> to make sure that the <a href=https://github.com/es-shims/ target=_blank rel="noopener noreferrer"><code>@es-shims</code> project</a> supports at least all the ES2015+ features (we actually aim for ES5+), so that Babel users are free to choose between at least two options.</p>
<p>This needs to happen <em>before</em> dropping built-in support for <code>core-js@3</code>, so that people interested in <code>es-shims</code> don't have to migrate twice.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=expand-targets-usage-for-granular-transforms>Expand <code>targets</code> usage for granular transforms<a href=#expand-targets-usage-for-granular-transforms class=hash-link aria-label="Direct link to expand-targets-usage-for-granular-transforms" title="Direct link to expand-targets-usage-for-granular-transforms">​</a></h3>
<p>Since the beginning, <code>@babel/preset-env</code> has used the <code>targets</code> option to automatically enable or disable transform plugins.</p>
<p>However, there isn't a 1-to-1 mapping between Babel plugins and features implemented in browsers.</p>
<p>For example, we have a single plugin for the different class fields types (public and private, static and instance), but browsers have varying compatibility matrices:</p>
<ul>
<li>Firefox 73 and Safari 14 support only public instance fields</li>
<li>Firefox 75+ supports public instance and static fields</li>
<li>Chrome 79+ supports public and private fields, but doesn't support private fields in some optional chaining expressions</li>
<li>Chrome 84+ fully supports private fields, and also private methods</li>
<li>Safari TP 121 fully supports private fields (even with <code>?.</code>), but it doesn't support private methods</li>
</ul>
<p>Creating a plugin for each feature is sub-optimal. For example, we can convert private methods to private fields and then, if needed, convert them to older syntax. However, we can generate better/optimized output by directly converting private methods down to older syntax without the intermediate step if we know that it needs to be transpiled down.</p>
<p>Since Babel 7.13.0, we can read the <code>targets</code> option directly inside a plugin, we can modify our plugins to automatically perform a <em>partial</em> compilation of a given ECMAScript feature, which would give advantages in the output size and runtime performance.</p>
<p><strong>Prior Art</strong></p>
<p>This approach isn't completely new. Thanks to a collaboration with <a href=https://twitter.com/_developit target=_blank rel="noopener noreferrer">@_developit</a>, in Babel 7.9.0 we introduced a new <code>bugfixes: true</code> option for <code>@babel/preset-env</code>. When this option is enabled, and when using <code>esmodules: true</code> as the compilation target, we only partially compile <a href=https://github.com/babel/preset-modules#features-supported target=_blank rel="noopener noreferrer">some features</a>. This what made us initially think about this possibility, but the current partial transforms are less useful when using more modern targets (for example, <code>defaults, not ie 11</code>).</p>
<p>We also already use the <code>targets</code> option to decide whether we can use <code>Object.assign</code> when compiling object spread or not.</p>
<p><strong>Action Points</strong></p>
<p>This goal can be split into two big tasks that can be done in parallel:</p>
<ul>
<li>We need to identify <em>where</em> these optimizations can be useful by collecting real-world browserslist queries and by simulating how popular queries (for example, <code>defaults</code> or <code>>2%, not dead</code>) will evolve in the future.</li>
<li>We need to actually implement the necessary optimizations, making sure that they still work well with the other plugins (since they would highly increase the number of possible transform combinations).</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=investigate-new-compiler-assumptions>Investigate new compiler <code>assumptions</code><a href=#investigate-new-compiler-assumptions class=hash-link aria-label="Direct link to investigate-new-compiler-assumptions" title="Direct link to investigate-new-compiler-assumptions">​</a></h3>
<p>In Babel 7.13.0 we introduced a new top-level <a href=https://babeljs.io/docs/en/options#assumptions target=_blank rel="noopener noreferrer"><code>assumptions</code></a> option, to formalize what the <code>loose</code> mode option does and offer more granular control to our users (since often they can only enable <em>some</em> assumptions and not all of them).</p>
<p>However, we only included options for assumptions we <em>already</em> made when compiling in <code>loose</code> mode. We can now investigate what new assumptions our users might need.</p>
<p>There are already some proposals, such as:</p>
<ul>
<li><a href=https://github.com/babel/babel/issues/8222 target=_blank rel="noopener noreferrer">#8222</a> - assume that all the ESM imports are actually immutable, avoiding the code needed for live bindings.</li>
<li><a href=https://github.com/babel/babel/issues/11356 target=_blank rel="noopener noreferrer">#11356</a> - assume that compiled classes do not extends native classes, avoiding the runtime performance cost needed to instantiate possibly native classes.</li>
</ul>
<p>We can find which new assumptions we should implement, by:</p>
<ul>
<li>Manually checking which features we compile to "non-obvious" output, which is usually caused by edge cases that many developers don't care about.</li>
<li>Asking for feedback from the community, since developers can test which assumptions work and which don't on their applications.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=overhaul-the-babel-repl>Overhaul the Babel REPL<a href=#overhaul-the-babel-repl class=hash-link aria-label="Direct link to Overhaul the Babel REPL" title="Direct link to Overhaul the Babel REPL">​</a></h3>
<p>The Babel REPL is a convenient playground to learn how Babel transpiles source code.</p>
<p>Current limits:</p>
<ul>
<li>The REPL does not support <code>assumptions</code> config. Although we have a dedicated per-assumption basis mini REPL on <a href=https://babel.dev/assumptions target=_blank rel="noopener noreferrer">https://babel.dev/assumptions</a>, currently we can not show how these <code>assumptions</code> might work together</li>
<li>The REPL does not support plugin options. Some plugins have required options, such as <code>@babel/plugin-proposal-record-and-tuple</code> and <code>@babel/plugin-proposal-decorators</code>
<a href=https://github.com/babel/website/issues/1292 target=_blank rel="noopener noreferrer">https://github.com/babel/website/issues/1292</a>, <a href=https://github.com/babel/website/issues/2224 target=_blank rel="noopener noreferrer">https://github.com/babel/website/issues/2224</a>, <a href=https://github.com/babel/website/pull/1970 target=_blank rel="noopener noreferrer">https://github.com/babel/website/pull/1970</a></li>
</ul>
<p>Features good to have:</p>
<ul>
<li>AST Explorer (integrate with existing one)</li>
<li>stderr with complete stack trace as error log</li>
<li>stdout as output</li>
<li>Change Babel version from UI</li>
</ul>
<p>At least 15% of open issues in babel-website are related to the REPL: <a href="https://github.com/babel/website/issues?q=is%3Aissue+is%3Aopen+label%3Arepl" target=_blank rel="noopener noreferrer">https://github.com/babel/website/issues?q=is%3Aissue+is%3Aopen+label%3Arepl</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=educationaldebugging-tooling>Educational/Debugging Tooling<a href=#educationaldebugging-tooling class=hash-link aria-label="Direct link to Educational/Debugging Tooling" title="Direct link to Educational/Debugging Tooling">​</a></h3>
<p>Related to the REPL/ASTExplorer, we could do with more tooling to help with general plugin development for ourselves and 3rd-party plugins. This is rather exploratory in nature: different visualizations for the AST itself, debugging, etc.</p>
<p>Some things already in progress Henry has been working on and off on:</p>
<ul>
<li><a href=https://codesandbox.io/s/babel-repl-custom-plugin-7s08o target=_blank rel="noopener noreferrer">Codesandbox</a> for making a simple Babel plugin in the same vein as <a href=https://astexplorer.net target=_blank rel="noopener noreferrer">https://astexplorer.net</a> but with custom configs.</li>
<li><a href="https://twitter.com/left_pad/status/1367941962083471361?s=20" target=_blank rel="noopener noreferrer">Visualization</a> of input to output mapping to help understand how Babel transforms its code. Could be useful even for documentation in getting JavaScript users familiar with new syntax or a specific demo of a transform.</li>
<li><a href="https://twitter.com/left_pad/status/1298792944099561473?s=20" target=_blank rel="noopener noreferrer">Mapping</a> of input to output like a sourcemap type structure. Can do a reverse mapping to find out what plugin caused the code to be outputted a certain way which helps with debugging.</li>
</ul>
<p>For an interactive example of what we are thinking about: <a href=https://babel-explorer.netlify.app/ target=_blank rel="noopener noreferrer">https://babel-explorer.netlify.app/</a> (click and hold the mouse in the bottom sector!)</div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.com/babel/website/edit/main/docs/../docs/roadmap.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/docs/babel-plugin-transform-flow-strip-types><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>transform-flow-strip-types</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/docs/caveats><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Caveats</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#babel-2021-roadmap class="table-of-contents__link toc-highlight">Babel 2021 Roadmap</a><ul><li><a href=#babel-8 class="table-of-contents__link toc-highlight">Babel 8</a><li><a href=#implement-new-tc39-proposals class="table-of-contents__link toc-highlight">Implement new TC39 proposals</a><li><a href=#move-babelpreset-env-into-babelcore class="table-of-contents__link toc-highlight">Move <code>@babel/preset-env</code> into <code>@babel/core</code></a><li><a href=#continue-developing-the-babel-polyfills-project class="table-of-contents__link toc-highlight">Continue developing the <code>babel-polyfills</code> project</a><li><a href=#expand-targets-usage-for-granular-transforms class="table-of-contents__link toc-highlight">Expand <code>targets</code> usage for granular transforms</a><li><a href=#investigate-new-compiler-assumptions class="table-of-contents__link toc-highlight">Investigate new compiler <code>assumptions</code></a><li><a href=#overhaul-the-babel-repl class="table-of-contents__link toc-highlight">Overhaul the Babel REPL</a><li><a href=#educationaldebugging-tooling class="table-of-contents__link toc-highlight">Educational/Debugging Tooling</a></ul></ul></div></div></div></div></main></div></div></div><footer class=nav-footer id=footer><section class=sitemap><a class=nav-home href=/><img src=https://d33wubrfki0l68.cloudfront.net/7a197cfe44548cc1a3f581152af70a3051e11671/78df8/img/babel.svg alt=Babel width=66 height=58></a><div><h5>Docs</h5><a href=/docs/learn>Learn ES2015</a></div><div><h5>Community</h5><a href=/videos>Videos</a><a href=/users>User Showcase</a><a href=http://stackoverflow.com/questions/tagged/babeljs target=_blank rel="noopener noreferrer">Stack Overflow</a><a href=https://babeljs.slack.com/ target=_blank rel="noopener noreferrer">Slack Channel</a><a href=https://x.com/babeljs target=_blank rel="noopener noreferrer">X (Twitter)</a><a href=https://bsky.app/profile/babel.dev target=_blank rel="noopener noreferrer">Bluesky</a></div><div><h5>More</h5><a href=/blog>Blog</a><a href=https://github.com/babel target=_blank rel="noopener noreferrer">GitHub Org</a><a href=https://github.com/babel/babel target=_blank rel="noopener noreferrer">GitHub Repo</a><a href=https://github.com/babel/website target=_blank rel="noopener noreferrer">Website Repo</a><a href=https://old.babeljs.io target=_blank rel="noopener noreferrer">Old 6.x Site</a><a href=http://henryzoo.com/babel.github.io target=_blank rel="noopener noreferrer">Old 5.x Site</a></div></section></footer></div>