<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-config-files" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.8.1"><title data-rh=true>Config Files · Babel</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://babel.qubitpi.org/docs/config-files><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="Config Files · Babel"><meta data-rh=true name=description content="Configuration File Types"><meta data-rh=true property=og:description content="Configuration File Types"><link data-rh=true rel=icon href=/img/favicon.png><link data-rh=true rel=canonical href=https://babel.qubitpi.org/docs/config-files><link data-rh=true rel=alternate href=https://babel.qubitpi.org/docs/config-files hreflang=en><link data-rh=true rel=alternate href=https://babel.qubitpi.org/docs/config-files hreflang=x-default><link data-rh=true rel=preconnect href=https://M7KGJDK6WF-dsn.algolia.net crossorigin=anonymous><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://babel.qubitpi.org/docs/config-files","name":"Config Files","position":1}]}</script><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="Babel RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="Babel Atom Feed"><link rel=search type=application/opensearchdescription+xml title=Babel href=/opensearch.xml><script src=https://unpkg.com/@babel/standalone@^7.0.0/babel.min.js defer></script><script src=/js/components/mini-repl.js type=module></script><script src=/js/components/assumption-repl.js type=module></script><link rel=stylesheet href=/assets/css/styles.fd320c57.css><script src=/assets/js/runtime~main.76d4615a.js defer></script><script src=/assets/js/main.6c0d810e.js defer></script><body class=navigation-with-keyboard><svg xmlns=http://www.w3.org/2000/svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/img/babel.svg><link rel=preload as=image href=https://d33wubrfki0l68.cloudfront.net/7a197cfe44548cc1a3f581152af70a3051e11671/78df8/img/babel.svg><div role=region aria-label="Skip to main content"><a class=skipToContent_oPtH href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/babel.svg alt="Babel logo" class="themedComponent_siVc themedComponent--light_hHel"><img src=/img/babel.svg alt="Babel logo" class="themedComponent_siVc themedComponent--dark_yETr"></div></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/docs/>Docs</a><a class="navbar__item navbar__link" href=/setup>Setup</a><a class="navbar__item navbar__link" href=/repl>Try it out</a><a class="navbar__item navbar__link" href=/videos/>Videos</a><a class="navbar__item navbar__link" href=/blog>Blog</a><div class=navbarSearchContainer_bzqh><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div><a href=https://opencollective.com/babel target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Donate<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPrP><use href=#theme-svg-external-link /></svg></a><a class="navbar__item navbar__link" href=/team>Team</a><a href=https://github.com/babel/babel target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPrP><use href=#theme-svg-external-link /></svg></a><div class="toggle_ki11 colorModeToggle_Hewu"><button class="clean-btn toggleButton_MMFG toggleButtonDisabled_Uw7m" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_k9hJ lightToggleIcon_lgto"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_k9hJ darkToggleIcon_U96C"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_k9hJ systemToggleIcon_E5c0"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_MB5r"><div class=docsWrapper__sE8><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_iEvu" type=button></button><div class=docRoot_DfVB><aside class="theme-doc-sidebar-container docSidebarContainer_c7NB"><div class=sidebarViewport_KYo0><div class=sidebar_CUen><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_jmj1"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/>Guides</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true href=/docs/config-files>Config Reference</a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/docs/config-files>Config Files</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/options>Config Options</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/plugins>Plugins</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/plugins-list>Plugins List</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/assumptions>Compiler assumptions</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/presets>Presets</a><button aria-label="Expand sidebar category 'Presets'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/roadmap>Misc</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/babel-cli>Integration Packages</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/babel-parser>Tooling Packages</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/babel-helper-compilation-targets>Helper Packages</a></div></ul></nav><button type=button title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_oTwn"><svg width=20 height=20 aria-hidden=true class=collapseSidebarButtonIcon_pMEX><g fill=#7a7a7a><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"/><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"/></g></svg></button></div></div></aside><main class=docMainContainer_a9sJ><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_Qr34"><div class=docItemContainer_tjFy><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_T5ub" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_sfvy><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><span class=breadcrumbs__link>Config Reference</span><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>Config Files</span></ul></nav><div class="tocCollapsible_wXna theme-doc-toc-mobile tocMobile_Ojys"><button type=button class="clean-btn tocCollapsibleButton_iI2p">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Config Files</h1></header><h2 class="anchor anchorWithStickyNavbar_JmGV" id=configuration-file-types>Configuration File Types<a href=#configuration-file-types class=hash-link aria-label="Direct link to Configuration File Types" title="Direct link to Configuration File Types">​</a></h2>
<p>Babel has two parallel config file formats, which can be used together, or independently.</p>
<details class="details_IpIu alert alert--info details_jERq" data-collapsed=true><summary>History</summary><div><div class=collapsibleContent_Fd2D><table><thead><tr><th>Version<th>Changes<tbody><tr><td><code>v7.21.0</code><td>Support <code>.babelrc.cts</code> and <code>babel.config.cts</code> (Experimental)<tr><td><code>v7.8.0</code><td>Support <code>.babelrc.mjs</code> and <code>babel.config.mjs</code><tr><td><code>v7.7.0</code><td>Support <code>.babelrc.json</code>, <code>.babelrc.cjs</code>, <code>babel.config.json</code>, <code>babel.config.cjs</code></table></div></div></details>
<ul>
<li>Project-wide configuration<!-- -->
<ul>
<li><code>babel.config.*</code> files, with the following extensions: <code>.json</code>, <code>.js</code>, <code>.cjs</code>, <code>.mjs</code>, <code>.cts</code>.</li>
</ul>
</li>
<li>File-relative configuration<!-- -->
<ul>
<li><code>.babelrc.*</code> files, with the following extensions: <code>.json</code>, <code>.js</code>, <code>.cjs</code>, <code>.mjs</code>, <code>.cts</code>.</li>
<li><code>.babelrc</code> file, with no extension.</li>
<li><code>package.json</code> files, with a <code>"babel"</code> key.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=project-wide-configuration>Project-wide configuration<a href=#project-wide-configuration class=hash-link aria-label="Direct link to Project-wide configuration" title="Direct link to Project-wide configuration">​</a></h2>
<p>New in Babel 7.x, Babel has a concept of a <a href=/docs/options#root>"root"</a> directory, which defaults
to the current working directory. For project-wide configuration, Babel will automatically search
for a <code>babel.config.json</code> file, or an equivalent one using the <a href=#supported-file-extensions>supported extensions</a>,
in this root directory. Alternatively, users can use an explicit
<a href=/docs/options#configfile>"configFile"</a> value to override the default config file search behavior.</p>
<p>Because project-wide config files are separated from the physical location of the config
file, they can be ideal for configuration that must apply broadly, even allowing
plugins and presets to easily apply to files in <code>node_modules</code> or in symlinked packages,
which were traditionally quite painful to configure in Babel 6.x.</p>
<p>The primary downside of this project-wide config is that, because it relies on the working
directory, it can be more painful to use in monorepos if the working directory is not the monorepo root.
See the <a href=#monorepos>monorepo</a> documentation for examples of how to use config files in that context.</p>
<p>Project-wide configs can also be disabled by setting <a href=/docs/options#configfile>"configFile"</a> to <code>false</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=file-relative-configuration>File-relative configuration<a href=#file-relative-configuration class=hash-link aria-label="Direct link to File-relative configuration" title="Direct link to File-relative configuration">​</a></h2>
<p>Babel loads <code>.babelrc.json</code> files, or an equivalent one using the <a href=#supported-file-extensions>supported extensions</a>, by searching up the
directory structure starting from the <a href=/docs/options#filename>"filename"</a> being compiled (limited by the caveats below).
This can be powerful because it allows you to create independent configurations for subsections of
a package. File-relative configurations are also <a href=/docs/options#merging>merged</a> over top of
project-wide config values, making them potentially useful for specific overrides, though that can
also be accomplished through <a href=/docs/options#overrides>"overrides"</a>.</p>
<p>There are a few edge cases to consider when using a file-relative config:</p>
<ul>
<li>Searching will stop once a directory containing a <code>package.json</code> is found, so a relative config
only applies within a single package.</li>
<li>The <a href=/docs/options#filename>"filename"</a> being compiled must be inside of
<a href=/docs/options#babelrcroots>"babelrcRoots"</a> packages, or else searching will be skipped entirely.</li>
</ul>
<p>These caveats mean that:</p>
<ul>
<li><code>.babelrc.json</code> files <em>only</em> apply to files within their own package</li>
<li><code>.babelrc.json</code> files in packages that aren't Babel's 'root' are ignored unless you opt in
with <a href=/docs/options#babelrcroots>"babelrcRoots"</a>.</li>
</ul>
<p>See the <a href=#monorepos>monorepo</a> documentation for more discussion on how to configure monorepos that have many packages.
File-relative configs can also be disabled by setting <a href=/docs/options#babelrc>"babelrc"</a> to <code>false</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=6x-vs-7x-babelrc-loading>6.x vs 7.x <code>.babelrc</code> loading<a href=#6x-vs-7x-babelrc-loading class=hash-link aria-label="Direct link to 6x-vs-7x-babelrc-loading" title="Direct link to 6x-vs-7x-babelrc-loading">​</a></h3>
<p>Users coming from Babel 6.x will likely trip up on these two edge cases, which are new in Babel 7.x.
These two restrictions were added to address common footguns in Babel 6.x:</p>
<ul>
<li><code>.babelrc</code> files applied to <code>node_modules</code> dependencies, often unexpectedly.</li>
<li><code>.babelrc</code> files <em>failed</em> to apply to symlinked <code>node_modules</code> when people expected them to behave like normal dependencies.</li>
<li><code>.babelrc</code> files <em>in</em> <code>node_modules</code> dependencies would be detected, even though the plugins and
presets inside they were generally not installed, and may not even be valid in the version of
Babel compiling the file.</li>
</ul>
<p>These cases will <em>primarily</em> cause issues for users with a monorepo structure, because if you
have</p>
<div class="language-text codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockContent_t_Hd><pre tabindex=0 class="prism-code language-text codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token plain">.babelrc</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">packages/</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  mod1/</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    package.json</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    src/index.js</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  mod2/</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    package.json</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    src/index.js</span><br></span></code></pre></div></div>
<p>the config will now be entirely ignored, because it is across a package boundary.</p>
<p>One alternative would be to create a <code>.babelrc</code> in each sub-package that uses <a href=/docs/options#extends>"extends"</a> as</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_kY6l>.babelrc.json</div><div class=codeBlockContent_t_Hd><pre tabindex=0 class="prism-code language-json codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token punctuation">{</span><span class="token plain"> </span><span class="token property">"extends"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style=color:#718c00>"../../.babelrc"</span><span class="token plain"> </span><span class="token punctuation">}</span><br></span></code></pre></div></div>
<p>Unfortunately, this approach can be a bit repetitive, and depending on how Babel is being used,
could require setting <a href=/docs/options#babelrcroots>"babelrcRoots"</a>.</p>
<p>Given that, it may be more desirable to rename the <code>.babelrc</code> to be a
<a href=#project-wide-configuration>project-wide "babel.config.json"</a>. As mentioned in the project-wide
section above, this may then require explicitly setting <a href=/docs/options#configfile>"configFile"</a>
since Babel will not find the config file if the working directory isn't correct.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=supported-file-extensions>Supported file extensions<a href=#supported-file-extensions class=hash-link aria-label="Direct link to Supported file extensions" title="Direct link to Supported file extensions">​</a></h2>
<p>Babel can be configured using any file extension natively supported by Node.js, as mentioned in <a href=#configuration-file-types>Configuration File Types</a> section:</p>
<ul>
<li>
<p><code>babel.config.json</code> and <code>.babelrc.json</code> are parsed as JSON5 and should contain an object matching
the <a href=/docs/options>options</a> format that Babel accepts. They have been supported since <code>v7.7.0</code>.</p>
<p>We recommend using this file type wherever possible: JS config files are
handy if you have complex configuration that is conditional or otherwise computed at build time.
However, the downside is that JS configs are less statically analyzable, and therefore have
negative effects on cacheability, linting, IDE autocomplete, etc.
Since <code>babel.config.json</code> and <code>.babelrc.json</code> are static JSON files, it allows other tools that
use Babel such as bundlers to cache the results of Babel safely, which can be a huge build
performance win.</p>
</li>
<li>
<p><code>babel.config.cjs</code> and <code>.babelrc.cjs</code> allow you to define your configuration as CommonJS,
using <code>module.exports</code>. They have been supported since <code>v7.7.0</code>.</p>
</li>
<li>
<p><code>babel.config.mjs</code> and <code>.babelrc.mjs</code> use native ECMAScript modules. They are supported by Node.js 13.2+ (or older versions via the <code>--experimental-modules</code> flag).
Please remember that native ECMAScript modules are asynchronous (that's why <code>import()</code> always
returns a promise!): for this reason, <code>.mjs</code> config files will throw when calling Babel
synchronously. They have been supported since <code>v7.8.0</code>.</p>
</li>
<li>
<p><code>babel.config.js</code> and <code>.babelrc.js</code> behave like the <code>.mjs</code> equivalents when your <code>package.json</code>
file contains the <a href=https://nodejs.org/api/esm.html#esm_code_package_json_code_code_type_code_field target=_blank rel="noopener noreferrer"><code>"type": "module"</code></a>
option, otherwise they are exactly the same as the <code>.cjs</code> files.</p>
</li>
<li>
<p><code>babel.config.cts</code> and <code>.babelrc.cts</code> allow you to define your configuration as Typescript + CommonJS. You must either install <code>@babel/preset-typescript</code>, or run Babel using <code>ts-node</code>.</p>
<div class="theme-admonition theme-admonition-note admonition_WCGJ alert alert--secondary"><div class=admonitionHeading_GCBg><span class=admonitionIcon_L39b><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>note</div><div class=admonitionContent_pbrs><p>🚧 This functionality is experimental. It's not possible yet to use <code>babel.config.ts</code> and <code>babel.config.mts</code> files, pending stabilization of the Node.js ESM loader API.</div></div>
</li>
</ul>
<p>JavaScript configuration files can either export an object, or a function that when called will
return the generated configuration.
Function-returning configs are given a few special powers because they can access an API exposed
by Babel itself. See <a href=#config-function-api>Config Function API</a> for more information.</p>
<div class="theme-admonition theme-admonition-note admonition_WCGJ alert alert--secondary"><div class=admonitionHeading_GCBg><span class=admonitionIcon_L39b><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>note</div><div class=admonitionContent_pbrs><p>For compatibility reasons, <code>.babelrc</code> is an alias for <code>.babelrc.json</code>.</div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=monorepos>Monorepos<a href=#monorepos class=hash-link aria-label="Direct link to Monorepos" title="Direct link to Monorepos">​</a></h2>
<p>Monorepo-structured repositories usually contain many packages, which means that they frequently
run into the caveats mentioned in <a href=#file-relative-configuration>file-relative configuration</a>
and config file loading in general. This section is aimed at helping users understand how
to approach monorepo configuration.</p>
<p>With monorepo setups, the core thing to understand is that Babel treats your working directory
as its logical <a href=/docs/options#root>"root"</a>, which causes problems if you want to run Babel
tools within a specific sub-package without having Babel apply to the repo as a whole.</p>
<p>Separately, it is also important to decide if you want to use <a href=#file-relative-configuration><code>.babelrc.json</code></a>
files or just a central <a href=#project-wide-configuration><code>babel.config.json</code></a>. <a href=#file-relative-configuration><code>.babelrc.json</code></a>
files are not required for subfolder-specific configuration like they were in Babel 6, so often
they are not needed in Babel 7, in favor of <a href=#project-wide-configuration><code>babel.config.json</code></a>.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=root-babelconfigjson-file>Root <code>babel.config.json</code> file<a href=#root-babelconfigjson-file class=hash-link aria-label="Direct link to root-babelconfigjson-file" title="Direct link to root-babelconfigjson-file">​</a></h3>
<p>The first step in any monorepo structure should be to create a <a href=#project-wide-configuration><code>babel.config.json</code></a>
file in repository root. This establishes Babel's core concept of the base directory of your repository.
Even if you want to use <a href=#file-relative-configuration><code>.babelrc.json</code></a> files to configure each separate package,
it is important to have as a place for repo-level options.</p>
<p>You can often place all of your repo configuration in the root <a href=#project-wide-configuration><code>babel.config.json</code></a>.
With <a href=/docs/options#overrides>"overrides"</a>, you can easily
specify configuration that only applies to certain subfolders of your repository, which can often be easier to
follow than creating many <code>.babelrc.json</code> files across the repo.</p>
<p>The first issue you'll likely run into is that by default, Babel expects to load <a href=#project-wide-configuration><code>babel.config.json</code></a>
files from the directory set as its <a href=/docs/options#root>"root"</a>, which means that if you create
a <a href=#project-wide-configuration><code>babel.config.json</code></a>, but run
Babel inside an individual package, e.g.</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_kY6l>Shell</div><div class=codeBlockContent_t_Hd><pre tabindex=0 class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token plain">cd packages/some-package;</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">babel src -d dist</span><br></span></code></pre></div></div>
<p>the <a href=/docs/options#root>"root"</a> Babel is using in that context is <em>not</em> your monorepo root,
and it won't be able to find the <a href=#project-wide-configuration><code>babel.config.json</code></a> file.</p>
<p>If all of your build scripts run relative to your repository root, things should already work, but if
you are running your Babel compilation process from within a subpackage, you need to tell Babel where
to look for the config. There are a few ways to do that, but the recommended way is
the <a href=/docs/options#rootmode>"rootMode"</a> option with <code>"upward"</code>, which will make Babel search from
the working directory upward looking for your <a href=#project-wide-configuration><code>babel.config.json</code></a> file,
and will use its location as the <a href=/docs/options#root>"root"</a> value.</p>
<p>One helpful way to test if your config is being detected is to place a <code>console.log()</code> call
inside of it if it is a <a href=#project-wide-configuration><code>babel.config.json</code></a> JavaScript file: the log will execute
the first time Babel loads it.</p>
<p>How you set this value varies by project, but here are a few examples:</p>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id=cli>CLI<a href=#cli class=hash-link aria-label="Direct link to CLI" title="Direct link to CLI">​</a></h4>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_kY6l>Shell</div><div class=codeBlockContent_t_Hd><pre tabindex=0 class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token plain">babel --root-mode upward src -d lib</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id=babelregister>@babel/register<a href=#babelregister class=hash-link aria-label="Direct link to @babel/register" title="Direct link to @babel/register">​</a></h4>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_kY6l>JavaScript</div><div class=codeBlockContent_t_Hd><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token function" style=color:#4271ae>require</span><span class="token punctuation">(</span><span class="token string" style=color:#718c00>"@babel/register"</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token literal-property property">rootMode</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style=color:#718c00>"upward"</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id=webpack>Webpack<a href=#webpack class=hash-link aria-label="Direct link to Webpack" title="Direct link to Webpack">​</a></h4>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_kY6l>webpack.config.js</div><div class=codeBlockContent_t_Hd><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token literal-property property">module</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">      </span><span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style=color:#718c00>"babel-loader"</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">      </span><span class="token literal-property property">options</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">        </span><span class="token literal-property property">rootMode</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style=color:#718c00>"upward"</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token punctuation">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id=jest>Jest<a href=#jest class=hash-link aria-label="Direct link to Jest" title="Direct link to Jest">​</a></h4>
<p>Jest is often installed at the root of the monorepo and may not require configuration,
but if it is installed per-package it can unfortunately be more complex to configure.</p>
<p>The main part is creating a custom jest transformer file that wraps <code>babel-jest</code>'s default
behavior in order to set the option, e.g.</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_kY6l>wrapper.js</div><div class=codeBlockContent_t_Hd><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token plain">module</span><span class="token punctuation">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style=color:#4271ae>require</span><span class="token punctuation">(</span><span class="token string" style=color:#718c00>"babel-jest"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword module" style=color:#8959a8>default</span><span class="token punctuation">.</span><span class="token method function property-access" style=color:#4271ae>createTransformer</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token literal-property property">rootMode</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style=color:#718c00>"upward"</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br></span></code></pre></div></div>
<p>and with that saved somewhere, you'd then use that file in the place of <code>babel-jest</code> in
your Jest options via the <a href=https://jestjs.io/docs/en/configuration#transform-object-string-string target=_blank rel="noopener noreferrer">transform option</a>:</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_kY6l>jest.config.js</div><div class=codeBlockContent_t_Hd><pre tabindex=0 class="prism-code language-json codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token property">"transform"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token property">"^.+\\.jsx?$"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style=color:#718c00>"./path/to/wrapper.js"</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">,</span><br></span></code></pre></div></div>
<p>so all JS files will be processed with your version of <code>babel-jest</code> with the option enabled.</p>
<div class="theme-admonition theme-admonition-note admonition_WCGJ alert alert--secondary"><div class=admonitionHeading_GCBg><span class=admonitionIcon_L39b><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>note</div><div class=admonitionContent_pbrs><p>When using <code>babel-jest</code> &lt; 27, you must omit the <code>.default</code> part: <code>require("babel-jest").createTransformer({ ...</code>.</div></div>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id=others>Others<a href=#others class=hash-link aria-label="Direct link to Others" title="Direct link to Others">​</a></h4>
<p>There are tons of tools, but at the core of it is that they need the <code>rootMode</code> option enabled
if the working directory is not already the monorepo root.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=subpackage-babelrcjson-files>Subpackage <code>.babelrc.json</code> files<a href=#subpackage-babelrcjson-files class=hash-link aria-label="Direct link to subpackage-babelrcjson-files" title="Direct link to subpackage-babelrcjson-files">​</a></h3>
<p>Similar to the way <a href=#project-wide-configuration><code>babel.config.json</code></a> files are required to be in the <a href=/docs/options#root>"root"</a>,
<a href=#file-relative-configuration><code>.babelrc.json</code></a> files must be in the root <em>package</em>, by default. This means that, the same way the
working directory affects <a href=#project-wide-configuration><code>babel.config.json</code></a> loading, it also affects <a href=#file-relative-configuration><code>.babelrc.json</code></a> loading.</p>
<p>Assuming you've already gotten your <a href=#project-wide-configuration><code>babel.config.json</code></a> file loaded properly as discussed above,
Babel will only process <a href=#file-relative-configuration><code>.babelrc.json</code></a> files inside that root package (and not subpackages),
so given for instance</p>
<div class="language-text codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockContent_t_Hd><pre tabindex=0 class="prism-code language-text codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token plain">package.json</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">babel.config.js</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">packages/</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  mod/</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    package.json</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    .babelrc.json</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    index.js</span><br></span></code></pre></div></div>
<p>compiling the <code>packages/mod/index.js</code> file will not load <code>packages/mod/.babelrc.json</code> because
this <a href=#file-relative-configuration><code>.babelrc.json</code></a> is within a sub-package, not the root package.</p>
<p>To enable processing of that <a href=#file-relative-configuration><code>.babelrc.json</code></a>, you will want to use the <a href=/docs/options#babelrcroots>"babelrcRoots"</a>
option from inside your <a href=#project-wide-configuration><code>babel.config.json</code></a> file to do</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_kY6l>JavaScript</div><div class=codeBlockContent_t_Hd><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token literal-property property">babelrcRoots</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token string" style=color:#718c00>"."</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token string" style=color:#718c00>"packages/*"</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token punctuation">]</span><span class="token punctuation">,</span><br></span></code></pre></div></div>
<p>so that Babel will consider all <code>packages/*</code> packages as allowed to load <a href=#file-relative-configuration><code>.babelrc.json</code></a> files,
along with the original repo root.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=config-function-api>Config Function API<a href=#config-function-api class=hash-link aria-label="Direct link to Config Function API" title="Direct link to Config Function API">​</a></h2>
<p>JS config files may export a function that will be passed config function API:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_kY6l>JavaScript</div><div class=codeBlockContent_t_Hd><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token plain">module</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access" style=color:#4271ae>exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style=color:#8959a8>function</span><span class="token punctuation">(</span><span class="token parameter" style=color:#f5871f>api</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token keyword control-flow" style=color:#8959a8>return</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><br></span></code></pre></div></div>
<p>The <code>api</code> object exposes everything Babel itself exposes from its index module, along with
config-file specific APIs:</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=apiversion><code>api.version</code><a href=#apiversion class=hash-link aria-label="Direct link to apiversion" title="Direct link to apiversion">​</a></h3>
<p>Type: <code>string</code><br></p>
<p>The version string for the Babel version that is loading the config file.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=apicache><code>api.cache</code><a href=#apicache class=hash-link aria-label="Direct link to apicache" title="Direct link to apicache">​</a></h3>
<p>JS configs are great because they can compute a config on the fly, but the downside
there is that it makes caching harder. Babel wants to avoid re-executing the
config function every time a file is compiled, because then it would also need to
re-execute any plugin and preset functions referenced in that config.</p>
<p>To avoid this, Babel expects users of config functions to tell it how to manage
caching within a config file.</p>
<ul>
<li><code>api.cache.forever()</code> - Permacache the computed config and never call the function again.</li>
<li><code>api.cache.never()</code> - Do not cache this config, and re-execute the function every time.</li>
<li><code>api.cache.using(() => process.env.NODE_ENV)</code> - Cache based on the value of <code>NODE_ENV</code>.
Any time the <code>using</code> callback returns a value other than the one that was expected, the overall
config function will be called again and a new entry will be added to the cache.</li>
<li><code>api.cache.invalidate(() => process.env.NODE_ENV)</code> - Cache based on the value of <code>NODE_ENV</code>.
Any time the <code>using</code> callback returns a value other than the one that was expected, the overall
config function will be called again and all entries in the cache will be replaced with the result.</li>
<li><code>api.cache(true)</code> - Same as <code>api.cache.forever()</code></li>
<li><code>api.cache(false)</code> - Same as <code>api.cache.never()</code></li>
</ul>
<p>Since the actual callback result is used to check if the cache entry is valid, it is recommended
that:</p>
<ul>
<li>Callbacks should be small and side-effect free.</li>
<li>Callbacks should return values with the smallest range possible. For example, the
<code>.using(() => process.env.NODE_ENV)</code> usage above is not ideal because it would create an unknown
number of cache entries depending on how many values of <code>NODE_ENV</code> are detected. It would be
safer to do <code>.using(() => process.env.NODE_ENV === "development")</code> because then the cache entry
can only ever be <code>true</code> or <code>false</code>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=apienv><code>api.env(...)</code><a href=#apienv class=hash-link aria-label="Direct link to apienv" title="Direct link to apienv">​</a></h3>
<p>Since <code>NODE_ENV</code> is a fairly common way to toggle behavior, Babel also includes an API function
meant specifically for that. This API is used as a quick way to check the
<a href=/docs/options#envname>"envName"</a> that Babel was loaded with, which takes <code>NODE_ENV</code> into account
if no other overriding environment is set.</p>
<p>It has a few different forms:</p>
<ul>
<li><code>api.env("production")</code> returns <code>true</code> if <code>envName === "production"</code>.</li>
<li><code>api.env(["development", "test"])</code> returns <code>true</code> if <code>["development", "test"].includes(envName)</code>.</li>
<li><code>api.env()</code> returns the current <code>envName</code> string.</li>
<li><code>api.env(envName => envName.startsWith("test-"))</code> returns <code>true</code> if the env starts with "test-".</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_WCGJ alert alert--secondary"><div class=admonitionHeading_GCBg><span class=admonitionIcon_L39b><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>note</div><div class=admonitionContent_pbrs><p>This function internally makes use of <a href=#apicache><code>api.cache</code></a> mentioned above to ensure that Babel is aware that this build depends on a specific <code>envName</code>. You should not use it alongside with <code>api.cache.forever()</code> or <code>api.cache.never()</code>.</div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=apicallercb><code>api.caller(cb)</code><a href=#apicallercb class=hash-link aria-label="Direct link to apicallercb" title="Direct link to apicallercb">​</a></h3>
<p>This API is used as a way to access the <code>caller</code> data that has been passed to Babel.
Since many instances of Babel may be running in the same process with different <code>caller</code>
values, this API is designed to automatically configure <code>api.cache</code>, the same way <code>api.env()</code> does.</p>
<p>The <code>caller</code> value is available as the first parameter of the callback function. It is best used
with something like</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_kY6l>JavaScript</div><div class=codeBlockContent_t_Hd><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token keyword" style=color:#8959a8>function</span><span class="token plain"> </span><span class="token function" style=color:#4271ae>isBabelRegister</span><span class="token punctuation">(</span><span class="token parameter" style=color:#f5871f>caller</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token keyword control-flow" style=color:#8959a8>return</span><span class="token plain"> </span><span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token plain">caller </span><span class="token operator">&&</span><span class="token plain"> caller</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style=color:#718c00>"@babel/register"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">module</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access" style=color:#4271ae>exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style=color:#8959a8>function</span><span class="token punctuation">(</span><span class="token parameter" style=color:#f5871f>api</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token keyword" style=color:#8959a8>const</span><span class="token plain"> isRegister </span><span class="token operator">=</span><span class="token plain"> api</span><span class="token punctuation">.</span><span class="token method function property-access" style=color:#4271ae>caller</span><span class="token punctuation">(</span><span class="token plain">isBabelRegister</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token keyword control-flow" style=color:#8959a8>return</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    </span><span class="token comment" style=color:#8e908c>// ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><br></span></code></pre></div></div>
<p>to toggle configuration behavior based on a specific environment.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=apiassertversionrange><code>api.assertVersion(range)</code><a href=#apiassertversionrange class=hash-link aria-label="Direct link to apiassertversionrange" title="Direct link to apiassertversionrange">​</a></h3>
<p>While <code>api.version</code> can be useful in general, it's sometimes nice to just declare your version.
This API exposes a simple way to do that with:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_kY6l>JavaScript</div><div class=codeBlockContent_t_Hd><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token plain">module</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access" style=color:#4271ae>exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style=color:#8959a8>function</span><span class="token punctuation">(</span><span class="token parameter" style=color:#f5871f>api</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  api</span><span class="token punctuation">.</span><span class="token method function property-access" style=color:#4271ae>assertVersion</span><span class="token punctuation">(</span><span class="token string" style=color:#718c00>"^7.2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token keyword control-flow" style=color:#8959a8>return</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    </span><span class="token comment" style=color:#8e908c>// ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.com/babel/website/edit/main/docs/../docs/config-files.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_bHB7 aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_ydrU"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/docs/v7-migration><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Upgrade to Babel 7</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/docs/options><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Config Options</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_XG6w thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#configuration-file-types class="table-of-contents__link toc-highlight">Configuration File Types</a><li><a href=#project-wide-configuration class="table-of-contents__link toc-highlight">Project-wide configuration</a><li><a href=#file-relative-configuration class="table-of-contents__link toc-highlight">File-relative configuration</a><ul><li><a href=#6x-vs-7x-babelrc-loading class="table-of-contents__link toc-highlight">6.x vs 7.x <code>.babelrc</code> loading</a></ul><li><a href=#supported-file-extensions class="table-of-contents__link toc-highlight">Supported file extensions</a><li><a href=#monorepos class="table-of-contents__link toc-highlight">Monorepos</a><ul><li><a href=#root-babelconfigjson-file class="table-of-contents__link toc-highlight">Root <code>babel.config.json</code> file</a><li><a href=#subpackage-babelrcjson-files class="table-of-contents__link toc-highlight">Subpackage <code>.babelrc.json</code> files</a></ul><li><a href=#config-function-api class="table-of-contents__link toc-highlight">Config Function API</a><ul><li><a href=#apiversion class="table-of-contents__link toc-highlight"><code>api.version</code></a><li><a href=#apicache class="table-of-contents__link toc-highlight"><code>api.cache</code></a><li><a href=#apienv class="table-of-contents__link toc-highlight"><code>api.env(...)</code></a><li><a href=#apicallercb class="table-of-contents__link toc-highlight"><code>api.caller(cb)</code></a><li><a href=#apiassertversionrange class="table-of-contents__link toc-highlight"><code>api.assertVersion(range)</code></a></ul></ul></div></div></div></div></main></div></div></div><footer class=nav-footer id=footer><section class=sitemap><a class=nav-home href=/><img src=https://d33wubrfki0l68.cloudfront.net/7a197cfe44548cc1a3f581152af70a3051e11671/78df8/img/babel.svg alt=Babel width=66 height=58></a><div><h5>Docs</h5><a href=/docs/learn>Learn ES2015</a></div><div><h5>Community</h5><a href=/videos>Videos</a><a href=/users>User Showcase</a><a href=http://stackoverflow.com/questions/tagged/babeljs target=_blank rel="noopener noreferrer">Stack Overflow</a><a href=https://babeljs.slack.com/ target=_blank rel="noopener noreferrer">Slack Channel</a><a href=https://x.com/babeljs target=_blank rel="noopener noreferrer">X (Twitter)</a><a href=https://bsky.app/profile/babel.dev target=_blank rel="noopener noreferrer">Bluesky</a></div><div><h5>More</h5><a href=/blog>Blog</a><a href=https://github.com/babel target=_blank rel="noopener noreferrer">GitHub Org</a><a href=https://github.com/babel/babel target=_blank rel="noopener noreferrer">GitHub Repo</a><a href=https://github.com/babel/website target=_blank rel="noopener noreferrer">Website Repo</a><a href=https://old.babeljs.io target=_blank rel="noopener noreferrer">Old 6.x Site</a><a href=http://henryzoo.com/babel.github.io target=_blank rel="noopener noreferrer">Old 5.x Site</a></div></section></footer></div>