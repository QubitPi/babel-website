<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-v7-migration-api" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.0"><title data-rh=true>Upgrade to Babel 7 (API) · Babel</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://paion-data.github.io/babel-website/docs/v7-migration-api><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="Upgrade to Babel 7 (API) · Babel"><meta data-rh=true name=description content="Refer users to this document when upgrading to Babel 7."><meta data-rh=true property=og:description content="Refer users to this document when upgrading to Babel 7."><link data-rh=true rel=icon href=/babel-website/img/favicon.png><link data-rh=true rel=canonical href=https://paion-data.github.io/babel-website/docs/v7-migration-api><link data-rh=true rel=alternate href=https://paion-data.github.io/babel-website/docs/v7-migration-api hreflang=en><link data-rh=true rel=alternate href=https://paion-data.github.io/babel-website/docs/v7-migration-api hreflang=x-default><link data-rh=true rel=preconnect href=https://M7KGJDK6WF-dsn.algolia.net crossorigin><link rel=alternate type=application/rss+xml href=/babel-website/blog/rss.xml title="Babel RSS Feed"><link rel=alternate type=application/atom+xml href=/babel-website/blog/atom.xml title="Babel Atom Feed"><link rel=search type=application/opensearchdescription+xml title=Babel href=/babel-website/opensearch.xml><script src=https://unpkg.com/jquery@1.9.1/jquery.min.js defer></script><script src=https://unpkg.com/@babel/standalone@^7.0.0/babel.min.js defer></script><script src=https://unpkg.com/ace-builds@1.3.3/src-min-noconflict/ace.js defer></script><script src=https://unpkg.com/clipboard@2.0.0/dist/clipboard.min.js defer></script><script src=/js/code-blocks-buttons.js defer></script><script src=/scripts/repl-page-hacks.js defer></script><script src=/js/components/mini-repl.js type=module></script><script src=/js/components/assumption-repl.js type=module></script><link rel=stylesheet href=/babel-website/assets/css/styles.38ed5d98.css><script src=/babel-website/assets/js/runtime~main.cb6009cb.js defer></script><script src=/babel-website/assets/js/main.19f9eb09.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":(window.matchMedia("(prefers-color-scheme: light)").matches,"light"),document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_oPtH href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/babel-website/><div class=navbar__logo><img src=/babel-website/img/babel.svg alt="Babel logo" class="themedComponent_siVc themedComponent--light_hHel"><img src=/babel-website/img/babel.svg alt="Babel logo" class="themedComponent_siVc themedComponent--dark_yETr"></div></a></div><div class="navbar__items navbar__items--right"><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/babel-website/docs/>Docs</a><a class="navbar__item navbar__link" href=/babel-website/setup>Setup</a><a href=/babel-website/repl class="navbar__item navbar__link" target=_top>Try it out</a><a class="navbar__item navbar__link" href=/babel-website/videos/>Videos</a><a class="navbar__item navbar__link" href=/babel-website/blog>Blog</a><div class=navbarSearchContainer_bzqh><button type=button class="DocSearch DocSearch-Button" aria-label=Search><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div><a href=https://opencollective.com/babel target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Donate<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPrP><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><a class="navbar__item navbar__link" href=/babel-website/team>Team</a><a href=https://github.com/babel/babel target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPrP><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><div class="toggle_ki11 colorModeToggle_Hewu"><button class="clean-btn toggleButton_MMFG toggleButtonDisabled_Uw7m" type=button disabled title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live=polite aria-pressed=false><svg viewBox="0 0 24 24" width=24 height=24 class=lightToggleIcon_lgto><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 class=darkToggleIcon_U96C><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_MB5r"><div class=docsWrapper__sE8><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_iEvu" type=button></button><div class=docRoot_DfVB><main class="docMainContainer_a9sJ docMainContainerEnhanced_grEJ"><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_Qr34"><div class=docItemContainer_tjFy><article><div class="tocCollapsible_wXna theme-doc-toc-mobile tocMobile_Ojys"><button type=button class="clean-btn tocCollapsibleButton_iI2p">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Upgrade to Babel 7 (API)</h1></header><p>Refer users to this document when upgrading to Babel 7.</p>
<blockquote>
<p>Also check out the <a href=/babel-website/docs/v7-migration>v7-migration guide</a> for other user-level changes.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=all-babel-packages>All Babel packages<a href=#all-babel-packages class=hash-link aria-label="Direct link to All Babel packages" title="Direct link to All Babel packages">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=nodejs-support>NodeJS support<a href=#nodejs-support class=hash-link aria-label="Direct link to NodeJS support" title="Direct link to NodeJS support">​</a></h3>
<p><img decoding=async loading=lazy src=https://img.shields.io/badge/level%20of%20awesomeness%3F-high-red.svg alt=high class=img_SS3x></p>
<p>Support for Node.js 0.10 and 0.12 has been dropped as both of this versions are out of maintenance.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=export-changes>Export changes<a href=#export-changes class=hash-link aria-label="Direct link to Export changes" title="Direct link to Export changes">​</a></h3>
<p><img decoding=async loading=lazy src=https://img.shields.io/badge/risk%20of%20breakage%3F-medium-yellow.svg alt=medium class=img_SS3x></p>
<p>Dropped use of <code>add-module-exports</code> plugin on Babel packages.
This had to be used earlier to prevent a breaking change with our exports.
If you import a Babel package in a library you may need to use <code>.default</code> when using <code>require</code> rather than <code>import</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=babelcore><code>@babel/core</code><a href=#babelcore class=hash-link aria-label="Direct link to babelcore" title="Direct link to babelcore">​</a></h2>
<p>Changed <code>ast</code> to be false by default for performance (most tools aren't using it) <a href=https://github.com/babel/babel/pull/7436/commits/8e3e6e0a8838607c5a01ba4232c4d3ff8dee5db0 target=_blank rel="noopener noreferrer">babel/babel#7436</a>.</p>
<p>The publicly exposed but undocumented <code>Pipeline</code> class has been removed. Best to use the transformation methods exposed from <code>@babel/core</code> directly <a href=https://github.com/babel/babel/pull/5376 target=_blank rel="noopener noreferrer">babel/babel#5376</a>.</p>
<p>The <code>babel.util.*</code> helper methods have been removed, and <code>util.EXTENSIONS</code> has been moved to <code>babel.DEFAULT_EXTENSIONS</code> <a href=https://github.com/babel/babel/pull/5487 target=_blank rel="noopener noreferrer">babel/babel#5487</a>.</p>
<p>Calls to <code>babel.transform</code> or any other transform function may return <code>null</code> if the file matched an <code>ignore</code> pattern or failed to match an <code>only</code> pattern <a href=https://github.com/babel/babel/pull/5487 target=_blank rel="noopener noreferrer">babel/babel#5487</a>.</p>
<p>The <code>opts.basename</code> option exposed on <code>state.file.opts</code> has been removed. If you need it, best to build it from <code>opts.filename</code> yourself <a href=https://github.com/babel/babel/pull/5467 target=_blank rel="noopener noreferrer">babel/babel#5467</a>.</p>
<p>Removed <code>resolveModuleSource</code>. We recommend using <code>babel-plugin-module-resolver@3</code>'s 'resolvePath' options <a href=https://github.com/babel/babel/pull/6343 target=_blank rel="noopener noreferrer">babel/babel#6343</a></p>
<p>Removed <code>babel.analyse</code> because it was just an alias for <code>babel.transform</code></p>
<p>Removed <code>path.mark()</code> since we didn't use it and it can be implemented in your own plugin.</p>
<p>Removed <code>babel.metadata</code> since the generated plugin metadata is always included in the output result.</p>
<p>Removed <code>path.hub.file.addImport</code>. You can use the <code>@babel/helper-module-imports</code> module instead.</p>
<div class="language-diff codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-diff codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>  import { addDefault } from "@babel/helper-module-imports";</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token plain">function importModule(pkgStore, name, path) {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829>  return path.hub.file.addImport(resolvePath(pkgStore, name, path), 'default', name);</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>  return addDefault(path, resolvePath(pkgStore, name, path), { nameHint: name });</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token plain">}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=config-changes>Config changes<a href=#config-changes class=hash-link aria-label="Direct link to Config changes" title="Direct link to Config changes">​</a></h3>
<p>We've made some major changes to way config lookup works:</p>
<blockquote>
<p>By default when searching for <code>.babelrc</code> files for a given file, stop at <code>package.json</code>.</p>
</blockquote>
<p>For any particular file, Babel v6 keeps looking up the directory hierarchy until it finds a config file.
This means your project might break because it uses a config file found outside the package root like in
the home directory.</p>
<blockquote>
<p>Adds support for a <code>babel.config.js</code> file along the lines of what Webpack does</p>
</blockquote>
<p>Because this would break how a monorepo works (including Babel itself), we are introducing a new config file,
that basically removes the hierarchical nature of configs.</p>
<p>Included is a <code>root</code> option that defaults to the current working directory for it to find the file.
It is also not loaded relatively so it will handle symlinking correctly, whereas before you may have had
hard-code the paths in webpack before.</p>
<p>Check the <code>babel.config.js</code> docs for more info: <a href=/babel-website/docs/config-files#project-wide-configuration>project-wide configuration</a></p>
<p>This file combined with the new <a href=/babel-website/docs/options#overrides><code>overrides</code></a> property and <code>env</code> lets you have a single config file
that can work for all the files in a project vs. multiple config files per folder.</p>
<p>We also exclude <code>node_modules</code> by default and only look in the root unless you opt-in to setting
an array of the <code>.babelrcRoots</code> option such as <code>"babelrcRoots": [".", "node_modules/pkgA"]</code></p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=asserting-babel-version-7450>Asserting Babel version <a href=https://github.com/babel/babel/pull/7450 target=_blank rel="noopener noreferrer">#7450</a><a href=#asserting-babel-version-7450 class=hash-link aria-label="Direct link to asserting-babel-version-7450" title="Direct link to asserting-babel-version-7450">​</a></h2>
<p>Plugins can check that it's loaded with a certain version of Babel.
The API will expose an <code>assertVersion</code> method, where you can pass in semver.</p>
<p>The declare helper is used to keep backwards compat with v6.</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_x_ju>JavaScript</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token keyword module" style=color:#8959a8>import</span><span class="token plain"> </span><span class="token imports punctuation">{</span><span class="token imports"> declare </span><span class="token imports punctuation">}</span><span class="token plain"> </span><span class="token keyword module" style=color:#8959a8>from</span><span class="token plain"> </span><span class="token string" style=color:#718c00>"@babel/helper-plugin-utils"</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token keyword module" style=color:#8959a8>export</span><span class="token plain"> </span><span class="token keyword module" style=color:#8959a8>default</span><span class="token plain"> </span><span class="token function" style=color:#4271ae>declare</span><span class="token punctuation">(</span><span class="token parameter" style=color:#f5871f>api</span><span class="token plain"> </span><span class="token arrow operator">=></span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  api</span><span class="token punctuation">.</span><span class="token method function property-access" style=color:#4271ae>assertVersion</span><span class="token punctuation">(</span><span class="token number" style=color:#f5871f>7</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token comment" style=color:#8e908c>// ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=babel-pluginspresets>Babel plugins/presets<a href=#babel-pluginspresets class=hash-link aria-label="Direct link to Babel plugins/presets" title="Direct link to Babel plugins/presets">​</a></h2>
<p>It currently takes it as the first parameter the <code>babel</code> object, and plugin/preset options, and the <code>dirname</code></p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_x_ju>JavaScript</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token plain">module</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access" style=color:#4271ae>exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style=color:#8959a8>function</span><span class="token punctuation">(</span><span class="token parameter" style=color:#f5871f>api</span><span class="token parameter punctuation" style=color:#f5871f>,</span><span class="token parameter" style=color:#f5871f> options</span><span class="token parameter punctuation" style=color:#f5871f>,</span><span class="token parameter" style=color:#f5871f> dirname</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=babel-parser-known-as-babylon><code>babel-parser</code> (known as Babylon)<a href=#babel-parser-known-as-babylon class=hash-link aria-label="Direct link to babel-parser-known-as-babylon" title="Direct link to babel-parser-known-as-babylon">​</a></h2>
<blockquote>
<p>Removed the <code>*</code> plugin option <a href=https://github.com/babel/babylon/pull/301 target=_blank rel="noopener noreferrer">#301</a> <img decoding=async loading=lazy src=https://img.shields.io/badge/risk%20of%20breakage%3F-low-yellowgreen.svg alt=low class=img_SS3x></p>
</blockquote>
<p>This was first added in v6.14.1 (Nov 17, 2016) so it's unlikely anyone was using this.</p>
<p>This catch-all option was removed; instead you should specifically decide which plugins you want to activate.</p>
<p>We thought it would be a good idea for tools so they wouldn't have to constantly update their config but it also means we can't easily make a breaking change.</p>
<p>Before:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_x_ju>JavaScript</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token plain">babelParser</span><span class="token punctuation">.</span><span class="token method function property-access" style=color:#4271ae>parse</span><span class="token punctuation">(</span><span class="token plain">code</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string" style=color:#718c00>"*"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>You can get the old behavior using:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_x_ju>JavaScript</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token plain">babelParser</span><span class="token punctuation">.</span><span class="token method function property-access" style=color:#4271ae>parse</span><span class="token punctuation">(</span><span class="token plain">code</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    </span><span class="token string" style=color:#718c00>"asyncGenerators"</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    </span><span class="token string" style=color:#718c00>"classProperties"</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    </span><span class="token string" style=color:#718c00>"decorators"</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    </span><span class="token string" style=color:#718c00>"doExpressions"</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    </span><span class="token string" style=color:#718c00>"dynamicImport"</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    </span><span class="token string" style=color:#718c00>"exportExtensions"</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    </span><span class="token string" style=color:#718c00>"flow"</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    </span><span class="token string" style=color:#718c00>"functionBind"</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    </span><span class="token string" style=color:#718c00>"functionSent"</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    </span><span class="token string" style=color:#718c00>"jsx"</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    </span><span class="token string" style=color:#718c00>"objectRestSpread"</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>See Babylon's <a href=/babel-website/docs/babel-parser#plugins>plugin options</a>.</p>
<blockquote>
<p>Renamed <code>decorators</code> plugin to <code>decorators-legacy</code> <img decoding=async loading=lazy src=https://img.shields.io/badge/risk%20of%20breakage%3F-medium-yellow.svg alt=medium class=img_SS3x></p>
</blockquote>
<p>It has been renamed to align with the <code>legacy</code> option of <code>@babel/plugin-proposal-decorators</code>. A new <code>decorators</code> plugin has been implemented, which implements the new decorators proposal.</p>
<p>The two versions of the proposals have different syntaxes, so it is highly recommended to use <code>decorators-legacy</code> until the new semantics are implemented by Babel.</p>
<blockquote>
<p>Removed <code>classConstructorCall</code> plugin <a href=https://github.com/babel/babylon/pull/291 target=_blank rel="noopener noreferrer">#291</a> <img decoding=async loading=lazy src=https://img.shields.io/badge/risk%20of%20breakage%3F-low-yellowgreen.svg alt=low class=img_SS3x></p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=babeltraverse><code>@babel/traverse</code><a href=#babeltraverse class=hash-link aria-label="Direct link to babeltraverse" title="Direct link to babeltraverse">​</a></h2>
<blockquote>
<p>Remove support for flow bindings <a href=https://github.com/babel/babel/pull/6528 target=_blank rel="noopener noreferrer">babel/babel#6528</a></p>
</blockquote>
<p>The reason behind this change is that <code>declare var foo</code> doesn't introduce a new local binding, but it represents a global one.</p>
<blockquote>
<p><code>getFunctionParent</code> will no longer return <code>Program</code>, please use <code>getProgramParent</code> instead <a href=https://github.com/babel/babel/pull/5923 target=_blank rel="noopener noreferrer">#5923</a>. <img decoding=async loading=lazy src=https://img.shields.io/badge/risk%20of%20breakage%3F-low-yellowgreen.svg alt=low class=img_SS3x></p>
</blockquote>
<p>It doesn't make sense that a function named <code>getFunctionParent</code> also returns the Program, so that was removed.</p>
<p>To get the equivalent behavior, you'll need to make a change like</p>
<div class="language-diff codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-diff codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829> path.scope.getFunctionParent()</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00> path.scope.getFunctionParent() || path.scope.getProgramParent()</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<blockquote>
<p>Path replacement/removal APIs now return an array of new paths <img decoding=async loading=lazy src=https://img.shields.io/badge/risk%20of%20breakage%3F-low-yellowgreen.svg alt=low class=img_SS3x></p>
</blockquote>
<p>For instance, using <code>Path#insertBefore</code>, or <code>Path#replaceWith</code> will now always return an array of the newly inserted/replaced paths.</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_x_ju>JavaScript</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token keyword" style=color:#8959a8>const</span><span class="token plain"> node </span><span class="token operator">=</span><span class="token plain"> t</span><span class="token punctuation">.</span><span class="token method function property-access" style=color:#4271ae>nullLiteral</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token keyword" style=color:#8959a8>const</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">replaced</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> path</span><span class="token punctuation">.</span><span class="token method function property-access" style=color:#4271ae>replaceWith</span><span class="token punctuation">(</span><span class="token plain">node</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">replace</span><span class="token punctuation">.</span><span class="token property-access">node</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> node</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment" style=color:#8e908c>// => true</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>This is especially useful when inserting several nodes into some higher-up scope, since you can immediately call the <code>Path</code> APIs on the node's new <code>Path</code>.</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_x_ju>JavaScript</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token keyword" style=color:#8959a8>const</span><span class="token plain"> parent </span><span class="token operator">=</span><span class="token plain"> path</span><span class="token punctuation">.</span><span class="token method function property-access" style=color:#4271ae>findParent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=></span><span class="token plain"> </span><span class="token comment" style=color:#8e908c>/* some selection criteria */</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token keyword" style=color:#8959a8>const</span><span class="token plain"> helperPaths </span><span class="token operator">=</span><span class="token plain"> path</span><span class="token punctuation">.</span><span class="token method function property-access" style=color:#4271ae>unshiftContainer</span><span class="token punctuation">(</span><span class="token string" style=color:#718c00>"body"</span><span class="token punctuation">,</span><span class="token plain"> helpers</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token comment" style=color:#8e908c>// helperPaths can now be referenced, manipulated, etc.</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=ast-changes>AST changes<a href=#ast-changes class=hash-link aria-label="Direct link to AST changes" title="Direct link to AST changes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=add-interpreterdirective-node-7928>Add <code>InterpreterDirective</code> Node <a href=https://github.com/babel/babel/pull/7928 target=_blank rel="noopener noreferrer">#7928</a><a href=#add-interpreterdirective-node-7928 class=hash-link aria-label="Direct link to add-interpreterdirective-node-7928" title="Direct link to add-interpreterdirective-node-7928">​</a></h3>
<p>Babylon already parses "shebangs" (<code>#!env node</code>) but put's in a comment in the <code>Program</code> node.
Now we are just creating an actual node for it.</p>
<p>Add a new <code>interpreter</code> field to the <code>Program</code> node.</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_x_ju>JavaScript</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token plain">extend </span><span class="token keyword" style=color:#8959a8>interface</span><span class="token plain"> </span><span class="token class-name" style=color:#eab700>Program</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token literal-property property">interpreter</span><span class="token operator">:</span><span class="token plain"> </span><span class="token maybe-class-name">InterpreterDirective</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token punctuation">}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Add the <code>InterpreterDirective</code> Node</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_x_ju>JavaScript</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token keyword" style=color:#8959a8>interface</span><span class="token plain"> </span><span class="token class-name" style=color:#eab700>InterpreterDirective</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token maybe-class-name">Node</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    </span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style=color:#718c00>"InterpreterDirective"</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    </span><span class="token literal-property property">value</span><span class="token operator">:</span><span class="token plain"> string</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token punctuation">}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=jsx-and-ts-node-builders-from-babeltypes-package-renamed>JSX* and TS* node builders (from @babel/types package) renamed<a href=#jsx-and-ts-node-builders-from-babeltypes-package-renamed class=hash-link aria-label="Direct link to JSX* and TS* node builders (from @babel/types package) renamed" title="Direct link to JSX* and TS* node builders (from @babel/types package) renamed">​</a></h3>
<p>The case has been changed: <code>jsx</code> and <code>ts</code> are now in lowercase.</p>
<div class="language-diff codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-diff codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829> t.jSXIdentifier()</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00> t.jsxIdentifier()</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>In general, we have differentiated the node types with <code>TypeAnnotation</code> for Flow and <code>TSTypeAnnotation</code> for TypeScript so for the shared type nodes, TypeScript has a <code>TS</code> prefix.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=expression-field-removed-from-arrowfunctionexpression><code>.expression</code> field removed from <code>ArrowFunctionExpression</code><a href=#expression-field-removed-from-arrowfunctionexpression class=hash-link aria-label="Direct link to expression-field-removed-from-arrowfunctionexpression" title="Direct link to expression-field-removed-from-arrowfunctionexpression">​</a></h3>
<p>The <code>expression</code> field was removed to eliminate two different sources of truth and needing plugins to manually keep them in sync. You can now simply check whether the function body is a <code>BlockStatement</code> or not:</p>
<div class="language-diff codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-diff codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> return {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   visitor: {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">     ArrowFunctionExpression({ node }) {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829>       if (node.expression) {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>       if (node.body.type !== "BlockStatement") {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">         // () => foo;</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">       }</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">     }</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   }</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> };</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=tokens-removed>Tokens removed<a href=#tokens-removed class=hash-link aria-label="Direct link to Tokens removed" title="Direct link to Tokens removed">​</a></h3>
<p>In previous versions <code>tokens</code> were always attached to the AST on the top-level. In the latest version of <code>@babel/parser</code> we removed this behavior and made it disabled by default to improve the performance of the parser. All usages in babel itself have been removed and <code>@babel/generator</code> is not using the tokens anymore for pretty printing.</p>
<p>If your babel plugin uses <code>tokens</code> at the moment, evaluate if it is still necessary and try to remove the usage if possible. If your plugin really depends on getting tokens you can reactivate it but please only consider this if there is no other way as this will hurt users performance.</p>
<p>To activate you need to set the <code>tokens</code> option of babylon to true. You can do this directly from your plugin.</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_x_ju>JavaScript</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token keyword module" style=color:#8959a8>export</span><span class="token plain"> </span><span class="token keyword module" style=color:#8959a8>default</span><span class="token plain"> </span><span class="token keyword" style=color:#8959a8>function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token keyword control-flow" style=color:#8959a8>return</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    </span><span class="token function" style=color:#4271ae>manipulateOptions</span><span class="token punctuation">(</span><span class="token parameter" style=color:#f5871f>opts</span><span class="token parameter punctuation" style=color:#f5871f>,</span><span class="token parameter" style=color:#f5871f> parserOpts</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">      parserOpts</span><span class="token punctuation">.</span><span class="token property-access">tokens</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean" style=color:#f5871f>true</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">    </span><span class="token spread operator">...</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token punctuation">}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=renamed>Renamed<a href=#renamed class=hash-link aria-label="Direct link to Renamed" title="Direct link to Renamed">​</a></h3>
<p>The following nodes have been renamed:</p>
<table><thead><tr><th>Name 6.x<th>Name 7.x<th>Example<th>PR<tbody><tr><td>ExistentialTypeParam<td>ExistsTypeAnnotation<td><code>type A = B&lt;*>;</code><td><a href=https://github.com/babel/babylon/pull/322 target=_blank rel="noopener noreferrer">#322</a><tr><td>NumericLiteralTypeAnnotation<td>NumberLiteralTypeAnnotation<td><code>type T = 0;</code><td><a href=https://github.com/babel/babylon/pull/332 target=_blank rel="noopener noreferrer">#332</a></table>
<p>Besides the AST-Nodes also all the corresponding functions in <code>@babel/types</code> have been renamed.</p>
<div class="language-diff codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-diff codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">import * as t from "@babel/types";</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">return {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829>  ExistentialTypeParam(path) {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829>    const parent = path.findParent((path) => path.isExistentialTypeParam());</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829>    t.isExistentialTypeParam(parent);</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>  ExistsTypeAnnotation(path) {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>    const parent = path.findParent((path) => path.isExistsTypeAnnotation());</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>    t.isExistsTypeAnnotation(parent);</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829>    return t.existentialTypeParam();</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>    return t.existsTypeAnnotation();</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">  },</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829>  NumericLiteralTypeAnnotation(path) {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829>    const parent = path.findParent((path) => path.isNumericLiteralTypeAnnotation());</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829>    t.isNumericLiteralTypeAnnotation(parent);</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>  NumberLiteralTypeAnnotation(path) {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>    const parent = path.findParent((path) => path.isNumberLiteralTypeAnnotation());</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>    t.isNumberLiteralTypeAnnotation(parent);</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829>    return t.numericLiteralTypeAnnotation();</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>    return t.numberLiteralTypeAnnotation();</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">  }</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">};</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=replaced>Replaced<a href=#replaced class=hash-link aria-label="Direct link to Replaced" title="Direct link to Replaced">​</a></h3>
<p>On the following AST-Nodes the value of the field <code>variance</code> has been changed from a simple string value to be its own AST-Node called <code>Variance</code>. <a href=https://github.com/babel/babylon/pull/333 target=_blank rel="noopener noreferrer">#333</a></p>
<p>The field is only available when enabling the <code>flow</code> plugin in babylon.</p>
<ul>
<li>ObjectProperty</li>
<li>ObjectMethod</li>
<li>AssignmentProperty</li>
<li>ClassMethod</li>
<li>ClassProperty</li>
<li>Property</li>
</ul>
<p>The type of the new <code>Variance</code> node looks like this:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_x_ju>JavaScript</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token plain">type </span><span class="token maybe-class-name">VarianceNode</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style=color:#718c00>"Variance"</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain">  </span><span class="token literal-property property">kind</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style=color:#718c00>"plus"</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style=color:#718c00>"minus"</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#4d4d4c><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="language-diff codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-diff codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">return {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">  Property({ node }) {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829>    if (node.variance === "plus") {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>    if (node.variance.kind === "plus") {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">      ...</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829>    } else if (node.variance === "minus") {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>    } else if (node.variance.kind === "minus") {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">      ...</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">    }</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">  }</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">};</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=location-changes>Location changes<a href=#location-changes class=hash-link aria-label="Direct link to Location changes" title="Direct link to Location changes">​</a></h3>
<p>The location info of <code>ObjectTypeIndexer</code> has been changed to not include semicolons. This was done to align with the flow-parser and have the same location information. <a href=https://github.com/babel/babylon/pull/228 target=_blank rel="noopener noreferrer">#228</a></p>
<p>Example:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockTitle_x_ju>JavaScript</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token keyword" style=color:#8959a8>var</span><span class="token plain"> </span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">a</span><span class="token operator">:</span><span class="token plain"> number</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token plain"> string </span><span class="token punctuation">}</span><span class="token punctuation">;</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="language-diff codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-diff codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">{</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">  "type": "ObjectTypeIndexer",</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">  "start": 9,</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829>  "end": 29,</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>  "end": 28,</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">  "loc": {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">    "start": {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">      "line": 1,</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">      "column": 9,</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">    },</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">    "end": {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">      "line": 1,</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829>      "column": 29</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>      "column": 28</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">    }</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">  }</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=removal>Removal<a href=#removal class=hash-link aria-label="Direct link to Removal" title="Direct link to Removal">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id=forawaitstatement>ForAwaitStatement<a href=#forawaitstatement class=hash-link aria-label="Direct link to ForAwaitStatement" title="Direct link to ForAwaitStatement">​</a></h4>
<p>The AST-Node <code>ForAwaitStatement</code> has been removed and is replace with the field <code>await</code> in the <code>ForOfStatement</code> node <a href=https://github.com/babel/babylon/pull/349 target=_blank rel="noopener noreferrer">#349</a></p>
<div class="language-diff codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-diff codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">interface ForOfStatement &lt;: ForInStatement {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">  type: "ForOfStatement";</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>  await: boolean;</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="language-diff codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-diff codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">return {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829>  ForAwaitStatement(path) {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829>    ...</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>  ForOfStatement(path) {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>    if (path.node.await) {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>      ...</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>    }</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">  }</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">};</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id=restproperty--spreadproperty>RestProperty & SpreadProperty<a href=#restproperty--spreadproperty class=hash-link aria-label="Direct link to RestProperty & SpreadProperty" title="Direct link to RestProperty & SpreadProperty">​</a></h4>
<p>The two AST-Nodes <code>RestProperty</code> and <code>SpreadProperty</code> have been removed in favor of reusing <code>RestElement</code> and <code>SpreadElement</code> <a href=https://github.com/babel/babylon/pull/384 target=_blank rel="noopener noreferrer">#384</a></p>
<div class="language-diff codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#4d4d4c;--prism-background-color:#fdfaeb><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-diff codeBlock_RMoD thin-scrollbar" style=color:#4d4d4c;background-color:#fdfaeb><code class=codeBlockLines_AclH><span class=token-line style=color:#4d4d4c><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">return {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">  SpreadElement(path) {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829>    ...</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829>  },</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829>  SpreadProperty(path) {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829>    ...</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>    if (path.parentPath.isObjectExpression()) {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>      ...</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>    } else if (path.parentPath.isArrayExpression()) {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>      ...</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>    }</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">  },</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">  RestElement(path) {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829>    ...</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829>  },</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829>  RestProperty(path) {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token deleted-sign deleted prefix deleted" style=color:#c82829>-</span><span class="token deleted-sign deleted line" style=color:#c82829>    ...</span><br></span><span class=token-line style=color:#4d4d4c><span class="token deleted-sign deleted line" style=color:#c82829></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>    if (path.parentPath.isObjectPattern()) {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>      ...</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>    } else if (path.parentPath.isArrayPattern()) {</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>      ...</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token inserted-sign inserted prefix inserted" style=color:#718c00>+</span><span class="token inserted-sign inserted line" style=color:#718c00>    }</span><br></span><span class=token-line style=color:#4d4d4c><span class="token inserted-sign inserted line" style=color:#718c00></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">  }</span><br></span><span class=token-line style=color:#4d4d4c><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">};</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>See our <a href=https://github.com/babel/babel/pull/5317 target=_blank rel="noopener noreferrer">upgrade PR for Babel</a> and the <a href=https://github.com/babel/babylon/blob/7.0/ast/spec.md target=_blank rel="noopener noreferrer">Babylon AST spec</a> for more information.</div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.com/babel/website/edit/main/docs/../docs/v7-migration-api.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_bHB7 aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_ydrU"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_XG6w thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#all-babel-packages class="table-of-contents__link toc-highlight">All Babel packages</a><ul><li><a href=#nodejs-support class="table-of-contents__link toc-highlight">NodeJS support</a><li><a href=#export-changes class="table-of-contents__link toc-highlight">Export changes</a></ul><li><a href=#babelcore class="table-of-contents__link toc-highlight"><code>@babel/core</code></a><ul><li><a href=#config-changes class="table-of-contents__link toc-highlight">Config changes</a></ul><li><a href=#asserting-babel-version-7450 class="table-of-contents__link toc-highlight">Asserting Babel version #7450</a><li><a href=#babel-pluginspresets class="table-of-contents__link toc-highlight">Babel plugins/presets</a><li><a href=#babel-parser-known-as-babylon class="table-of-contents__link toc-highlight"><code>babel-parser</code> (known as Babylon)</a><li><a href=#babeltraverse class="table-of-contents__link toc-highlight"><code>@babel/traverse</code></a><li><a href=#ast-changes class="table-of-contents__link toc-highlight">AST changes</a><ul><li><a href=#add-interpreterdirective-node-7928 class="table-of-contents__link toc-highlight">Add <code>InterpreterDirective</code> Node #7928</a><li><a href=#jsx-and-ts-node-builders-from-babeltypes-package-renamed class="table-of-contents__link toc-highlight">JSX* and TS* node builders (from @babel/types package) renamed</a><li><a href=#expression-field-removed-from-arrowfunctionexpression class="table-of-contents__link toc-highlight"><code>.expression</code> field removed from <code>ArrowFunctionExpression</code></a><li><a href=#tokens-removed class="table-of-contents__link toc-highlight">Tokens removed</a><li><a href=#renamed class="table-of-contents__link toc-highlight">Renamed</a><li><a href=#replaced class="table-of-contents__link toc-highlight">Replaced</a><li><a href=#location-changes class="table-of-contents__link toc-highlight">Location changes</a><li><a href=#removal class="table-of-contents__link toc-highlight">Removal</a></ul></ul></div></div></div></div></main></div></div></div><footer class=nav-footer id=footer><section class=sitemap><a class=nav-home href=/babel-website/><img src=https://d33wubrfki0l68.cloudfront.net/7a197cfe44548cc1a3f581152af70a3051e11671/78df8/img/babel.svg alt=Babel width=66 height=58></a><div><h5>Docs</h5><a href=/babel-website/docs/learn>Learn ES2015</a></div><div><h5>Community</h5><a href=/babel-website/videos>Videos</a><a href=/babel-website/users>User Showcase</a><a href=http://stackoverflow.com/questions/tagged/babeljs target=_blank rel="noopener noreferrer">Stack Overflow</a><a href=https://babeljs.slack.com/ target=_blank rel="noopener noreferrer">Slack Channel</a><a href=https://x.com/babeljs target=_blank rel="noopener noreferrer">X (Twitter)</a><a href=https://bsky.app/profile/babel.dev target=_blank rel="noopener noreferrer">Bluesky</a></div><div><h5>More</h5><a href=/babel-website/blog>Blog</a><a href=https://github.com/babel target=_blank rel="noopener noreferrer">GitHub Org</a><a href=https://github.com/babel/babel target=_blank rel="noopener noreferrer">GitHub Repo</a><a href=https://github.com/babel/website target=_blank rel="noopener noreferrer">Website Repo</a><a href=https://old.babeljs.io target=_blank rel="noopener noreferrer">Old 6.x Site</a><a href=http://henryzoo.com/babel.github.io target=_blank rel="noopener noreferrer">Old 5.x Site</a></div></section></footer></div>