"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["37028"],{1913:function(e,n,t){t.r(n),t.d(n,{assets:function(){return a},contentTitle:function(){return l},default:function(){return d},frontMatter:function(){return o},metadata:function(){return r},toc:function(){return c}});var r=t(45270),i=t(24246),s=t(80980);let o={layout:"post",title:"7.18.0 Released: Destructuring private elements and TypeScript 4.7",authors:"team",date:new Date("2022-05-19T00:00:00.000Z"),categories:"announcements",share_text:"Babel 7.18.0 Released"},l=void 0,a={authorsImageUrls:[void 0]},c=[{value:"Highlights",id:"highlights",level:2},{value:"Private destructuring (#14304)",id:"private-destructuring-14304",level:3},{value:"TypeScript 4.7 support (#14359, #14457, #14476)",id:"typescript-47-support-14359-14457-14476",level:3},{value:"Inline <code>regenerator-runtime</code> helper (#14538)",id:"inline-regenerator-runtime-helper-14538",level:3}];function u(e){let n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"We just published Babel 7.18.0!"}),"\n",(0,i.jsxs)(n.p,{children:["This release includes support for the ",(0,i.jsx)(n.a,{href:"https://github.com/tc39/proposal-destructuring-private",children:"private destructuring"})," proposal and for TypeScript 4.7."]}),"\n",(0,i.jsxs)(n.p,{children:["You can read the whole changelog ",(0,i.jsx)(n.a,{href:"https://github.com/babel/babel/releases/tag/v7.18.0",children:"on GitHub"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["If you or your company want to support Babel and the evolution of JavaScript, but aren't sure how, you can donate to us on our ",(0,i.jsx)(n.a,{href:"https://github.com/babel/babel?sponsor=1",children:"Open Collective"})," and, better yet, work with us on the implementation of ",(0,i.jsx)(n.a,{href:"https://github.com/babel/proposals",children:"new ECMAScript proposals"})," directly! As a volunteer-driven project, we rely on the community's support to fund our efforts in supporting the wide range of JavaScript users. Reach out at ",(0,i.jsx)(n.a,{href:"mailto:team@babeljs.io",children:"team@babeljs.io"})," if you'd like to discuss more!"]}),"\n",(0,i.jsx)(n.h2,{id:"highlights",children:"Highlights"}),"\n",(0,i.jsxs)(n.h3,{id:"private-destructuring-14304",children:["Private destructuring (",(0,i.jsx)(n.a,{href:"https://github.com/babel/babel/pull/14304",children:"#14304"}),")"]}),"\n",(0,i.jsxs)(n.p,{children:["Babel supports transforming the ",(0,i.jsx)(n.a,{href:"https://github.com/tc39/proposal-destructuring-private",children:"private destructuring"})," proposal. Now you can use private fields or methods in destructuring patterns:"]}),"\n",(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Input"}),(0,i.jsx)("th",{children:"Output"})]})}),(0,i.jsx)("tbody",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",metastring:'title="JavaScript"',children:"class Foo {\n  #x = 0;\n  y = 0;\n\n  equals(obj) {\n    const { #x: x, y: y } = this;\n\n    return (\n      x === obj.#x && y === obj.y\n    );\n  }\n}\n\n"})})}),(0,i.jsx)("td",{children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",metastring:'title="JavaScript"',children:"class Foo {\n  #x = 0;\n  y = 0;\n\n  equals(obj) {\n    const x = this.#x,\n      { y } = this;\n\n    return (\n      x === obj.#x && y === obj.y\n    );\n  }\n}\n"})})})]})})]}),"\n",(0,i.jsxs)(n.p,{children:["You can enable it by adding the ",(0,i.jsx)(n.code,{children:"@babel/plugin-proposal-destructuring-private"})," plugin to your configuration."]}),"\n",(0,i.jsxs)(n.p,{children:["To minimize the transpiling footprint, the code generated by this plugin will still expect non-private destructuring and private elements support. If you need to compile them further, you can enable the relevant plugins (or you can use ",(0,i.jsx)(n.code,{children:"@babel/preset-env"}),")."]}),"\n",(0,i.jsxs)(n.h3,{id:"typescript-47-support-14359-14457-14476",children:["TypeScript 4.7 support (",(0,i.jsx)(n.a,{href:"https://github.com/babel/babel/pull/14359",children:"#14359"}),", ",(0,i.jsx)(n.a,{href:"https://github.com/babel/babel/pull/14457",children:"#14457"}),", ",(0,i.jsx)(n.a,{href:"https://github.com/babel/babel/pull/14476",children:"#14476"}),")"]}),"\n",(0,i.jsx)(n.p,{children:"TypeScript 4.7 supports different new syntactic features:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"instantiation expressions, which allow specifying type arguments of functions without invoking them:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"const identity = <T>(val: T) => val;\n\nconst stringIdentity = identity<string>; // (val: string) => string;\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"explicit variance annotations for type arguments, to guide the TypeScript type checker when computing compatibility between different types:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"type Provider<out T> = () => T;\ntype Consumer<in T> = (x: T) => void;\ntype Mapper<in T, out U> = (x: T) => U;\ntype Processor<in out T> = (x: T) => T;\n"})}),"\n",(0,i.jsxs)(n.p,{children:["In this example, ",(0,i.jsx)(n.code,{children:"Provide<string>"})," is a subtype of ",(0,i.jsx)(n.code,{children:"Provider<string | number>"})," while ",(0,i.jsx)(n.code,{children:"Consumer<string | number>"})," is a subtype of ",(0,i.jsx)(n.code,{children:"Consumer<string>"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["constraints for the ",(0,i.jsx)(n.code,{children:"infer"})," operator in conditional types:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'type GetColor<T> =\n  T extends { color: infer C extends "red" | "pink" }\n    ? C\n    : "unknown color";\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["You can read the full TypeScript 4.7 release announcement ",(0,i.jsx)(n.a,{href:"https://devblogs.microsoft.com/typescript/announcing-typescript-4-7/",children:"on their blog"}),"."]}),"\n",(0,i.jsxs)(n.h3,{id:"inline-regenerator-runtime-helper-14538",children:["Inline ",(0,i.jsx)(n.code,{children:"regenerator-runtime"})," helper (",(0,i.jsx)(n.a,{href:"https://github.com/babel/babel/pull/14538",children:"#14538"}),")"]}),"\n",(0,i.jsxs)(n.p,{children:["Starting from Babel 7.18.0, ",(0,i.jsx)(n.code,{children:"regenerator-runtime"})," is automatically injected in the same way that Babel injects the other runtime helpers, without relying on an implicit ",(0,i.jsx)(n.code,{children:"regeneratorRuntime"})," global. When not using ",(0,i.jsx)(n.a,{href:"https://babeljs.io/docs/en/babel-plugin-transform-runtime",children:(0,i.jsx)(n.code,{children:"@babel/plugin-transform-runtime"})}),", Babel will automatically inline the ",(0,i.jsx)(n.code,{children:"regeneratorRuntime"})," helper:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["you can stop manually loading ",(0,i.jsx)(n.code,{children:"regenerator-runtime"})," (with ",(0,i.jsx)(n.code,{children:"import"}),", ",(0,i.jsx)(n.code,{children:"require"})," or ",(0,i.jsx)(n.code,{children:"<script>"}),");"]}),"\n",(0,i.jsxs)(n.li,{children:["you can delete ",(0,i.jsx)(n.code,{children:'"regenerator-runtime"'})," from your dependencies in ",(0,i.jsx)(n.code,{children:"package.json"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["For example this is the output difference between old and new Babel versions when compiling ",(0,i.jsx)(n.code,{children:"var f = function*() {};"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:'+function _regeneratorRuntime() { /* ... */ }\n\n-var f = /*#__PURE__*/regeneratorRuntime.mark(function f() {\n+var f = /*#__PURE__*/_regeneratorRuntime().mark(function f() {\n-  return regeneratorRuntime.wrap(function f$(_context) {\n+  return _regeneratorRuntime().wrap(function f$(_context) {\n     while (1) {\n       switch (_context.prev = _context.next) {\n         case 0:\n         case "end":\n           return _context.stop();\n       }\n     }\n   }, f);\n });\n'})})]})}function d(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},80980:function(e,n,t){t.d(n,{Z:function(){return l},a:function(){return o}});var r=t(27378);let i={},s=r.createContext(i);function o(e){let n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(s.Provider,{value:n},e.children)}},45270:function(e){e.exports=JSON.parse('{"permalink":"/blog/2022/05/19/7.18.0","source":"@site/blog/2022-05-19-7.18.0.md","title":"7.18.0 Released: Destructuring private elements and TypeScript 4.7","description":"We just published Babel 7.18.0!","date":"2022-05-19T00:00:00.000Z","tags":[],"readingTime":2.79,"hasTruncateMarker":true,"authors":[{"name":"Babel Team","url":"https://twitter.com/babeljs","email":"team@babeljs.io","key":"team","page":null}],"frontMatter":{"layout":"post","title":"7.18.0 Released: Destructuring private elements and TypeScript 4.7","authors":"team","date":"2022-05-19T00:00:00.000Z","categories":"announcements","share_text":"Babel 7.18.0 Released"},"unlisted":false,"prevItem":{"title":"7.19.0 Released: Stage 3 decorators and more RegExp features!","permalink":"/blog/2022/09/05/7.19.0"},"nextItem":{"title":"7.17.0 Released: RegExp \'v\' mode and ... \uD83E\uDD41 decorators!","permalink":"/blog/2022/02/02/7.17.0"}}')}}]);