"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["86716"],{8174:function(e,t,n){n.r(t),n.d(t,{assets:function(){return h},contentTitle:function(){return c},default:function(){return b},frontMatter:function(){return o},metadata:function(){return a},toc:function(){return d}});var a=n(92307),l=n(24246),i=n(80980),r=n(95181),s=n(38049);let o={layout:"post",title:"The State of babel-eslint",authors:"kai",date:new Date("2020-07-13T00:00:00.000Z"),categories:"announcements",share_text:"The State of babel-eslint"},c=void 0,h={authorsImageUrls:[void 0]},d=[{value:"The Past",id:"the-past",level:2},{value:"The Present",id:"the-present",level:2},{value:"The Future",id:"the-future",level:2},{value:"Moving Forward Together",id:"moving-forward-together",level:2}];function u(e){let t={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.code,{children:"babel-eslint"})," is moved to ",(0,l.jsx)(t.code,{children:"@babel/eslint-parser"}),"!"]}),"\n",(0,l.jsx)(t.h2,{id:"the-past",children:"The Past"}),"\n",(0,l.jsxs)(t.p,{children:["Existing as a compatibility layer between Babel and ESLint \u2013 two projects maintained by two separate teams \u2013 ",(0,l.jsx)(t.code,{children:"babel-eslint"})," has been a difficult package to maintain since the beginning. Some of the challenges the team has faced while maintaining ",(0,l.jsx)(t.code,{children:"babel-eslint"}),":"]}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.code,{children:"babel-eslint"})," has historically been maintained by the Babel team, and ensuring that ESLint's core rules (which are released every two weeks) work with experimental syntax is a monumental task."]}),"\n",(0,l.jsxs)(t.li,{children:["Babel's internal AST representation differs from ",(0,l.jsx)(t.a,{href:"https://github.com/estree/estree",children:"ESTree"}),", the AST specification used by ESLint. As a result, ESLint-compatibility requires that Babel's parser has a plugin that outputs ASTs that are ESTree-compatible."]}),"\n",(0,l.jsxs)(t.li,{children:["While Babel enables the use of experimental syntax, ESLint core only supports syntax once it reaches ",(0,l.jsx)(t.a,{href:"https://tc39.es/process-document/",children:"Stage 4"})," and is finalized in the spec. This means that ESLint's core rules aren't designed to work with syntax that is Stage 3 and below. Additionally, ESLint has been blocked by the finalizing of the ESTree spec, leading to an even larger discrepancy in the syntax the two projects support."]}),"\n",(0,l.jsxs)(t.li,{children:["The version of Babel's parser that ",(0,l.jsx)(t.code,{children:"babel-eslint"})," relies on is a direct dependency in its ",(0,l.jsx)(t.code,{children:"package.json"})," and the plugins it enables are hardcoded, leading to a potential mismatch in versions and enabled language features between compiling and linting. This has historically led to a lot of confusion and hard-to-debug issues, and we believe solving this issue is a big win for both maintainers and end users."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.code,{children:"babel-eslint"})," has to be updated to handle changes in both upstream projects, and has often been out of sync with one or the other."]}),"\n"]}),"\n",(0,l.jsxs)(t.p,{children:["The challenges above have added up to ",(0,l.jsx)(t.code,{children:"babel-eslint"})," requiring more resources than the team has at its disposal, resulting in ",(0,l.jsx)(t.code,{children:"babel-eslint"})," not getting the attention a widely used project (6M downloads a week at the time of this writing) requires to stay up-to-date."]}),"\n",(0,l.jsx)(t.h2,{id:"the-present",children:"The Present"}),"\n",(0,l.jsxs)(t.p,{children:["With the next iteration of ",(0,l.jsx)(t.code,{children:"babel-eslint"}),", we have decided to publish the package under a new name: ",(0,l.jsx)(t.code,{children:"@babel/eslint-parser"}),". To alleviate some of the challenges discussed above, we are doing the following:"]}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.code,{children:"@babel/eslint-parser"})," will require ",(0,l.jsx)(t.code,{children:"@babel/core"})," as a peer dependency and will now use Babel core's APIs to read and apply your Babel configuration. This means that the same version of Babel with the same settings will be used for both compiling and linting. This is consistent with what we recommend and do with other packages in the Babel ecosystem."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.code,{children:"@babel/eslint-parser"})," will live in the main ",(0,l.jsx)(t.a,{href:"https://github.com/babel/babel/tree/main/eslint/babel-eslint-parser",children:(0,l.jsx)(t.code,{children:"babel/babel"})})," monorepo with other Babel packages. We hope this will help to mitigate some of the syncing issues ",(0,l.jsx)(t.code,{children:"babel-eslint"})," has seen in the past and allow us to lint the repo with the latest source code in GitHub, shortening the feedback loop of how changes in Babel affect linting."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.a,{href:"https://github.com/estree/estree",children:"ESTree"})," - the AST specification that ESLint follows - has recently become active again, and the Babel team is now actively involved in the project. This will hopefully allow us to share what we learn about the AST representation of experimental syntax and help make the integration between tools easier."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.a,{href:"https://kaicataldo.com",children:"Kai Cataldo"})," has been helping out with ",(0,l.jsx)(t.code,{children:"babel-eslint"})," for a number of years now, and as a result of being a maintainer of both Babel and ESLint, is uniquely positioned to focus on the interoperability of these two tools. Over the past few months, he has been working on the code changes discussed above and will continue to support the new packages once they are released."]}),"\n"]}),"\n",(0,l.jsx)(t.h2,{id:"the-future",children:"The Future"}),"\n",(0,l.jsx)(t.p,{children:"We believe that these packages are ready to be released. Because of all the integrations and projects involved (Babel, ESLint, Prettier, frameworks, various plugins, text editor integrations, command-line tools, etc.), we're sure there will be things that need to be fixed, and we plan to iterate quickly."}),"\n",(0,l.jsxs)(t.p,{children:["Please note that ",(0,l.jsx)(t.code,{children:"@babel/eslint-parser"})," will rely on ",(0,l.jsx)(t.code,{children:"@babel/core"})," as a peer dependency and this package must be in your project's ",(0,l.jsx)(t.code,{children:"node_modules"}),"."]}),"\n",(0,l.jsxs)(t.p,{children:["Once you have ensured that ",(0,l.jsx)(t.code,{children:"@babel/core"})," has been installed, you can run the following commands to upgrade from ",(0,l.jsx)(t.code,{children:"babel-eslint"})," and ",(0,l.jsx)(t.code,{children:"babel-eslint-plugin"})," to the new packages:"]}),"\n",(0,l.jsxs)(r.Z,{children:[(0,l.jsx)(s.Z,{value:"npm",children:(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-shell",children:"npm uninstall babel-eslint babel-eslint-plugin\nnpm install --save-dev @babel/eslint-parser @babel/eslint-plugin\n"})})}),(0,l.jsx)(s.Z,{value:"yarn",label:"Yarn",children:(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-shell",children:"yarn remove babel-eslint babel-eslint-plugin\nyarn add --dev @babel/eslint-parser @babel/eslint-plugin\n"})})}),(0,l.jsx)(s.Z,{value:"pnpm",label:"pnpm",children:(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-shell",children:"pnpm remove babel-eslint babel-eslint-plugin\npnpm add --save-dev @babel/eslint-parser @babel/eslint-plugin\n"})})}),(0,l.jsx)(s.Z,{value:"bun",label:"Bun",children:(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-shell",children:"bun remove babel-eslint babel-eslint-plugin\nbun add --dev @babel/eslint-parser @babel/eslint-plugin\n"})})})]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-diff",metastring:'title=".eslintrc.js"',children:'module.exports = {\n---  parser: "babel-eslint",\n+++  parser: "@babel/eslint-parser"\n    plugins: [\n---   "babel"\n+++   "@babel\n    ]\n};\n'})}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.code,{children:"@babel/eslint-parser"})," expects a standard Babel configuration file (",(0,l.jsx)(t.code,{children:".babelrc"})," or ",(0,l.jsx)(t.code,{children:"babel.config.js"}),"). For cases where users might not want to use a Babel configuration file or are running Babel through another tool (such as Webpack with babel-loader), ",(0,l.jsx)(t.code,{children:"@babel/eslint-parser"})," also supports applying ",(0,l.jsx)(t.a,{href:"https://babeljs.io/docs/en/options",children:"Babel configuration"})," through your ESLint configuration. Please see the ",(0,l.jsx)(t.a,{href:"https://github.com/babel/babel/tree/main/eslint/babel-eslint-parser#additional-parser-configuration",children:(0,l.jsx)(t.code,{children:"babelOptions"})})," configuration option for more details."]}),"\n",(0,l.jsx)(t.h2,{id:"moving-forward-together",children:"Moving Forward Together"}),"\n",(0,l.jsxs)(t.p,{children:["Our short-term goal in making the changes outlined above is to make it easier for ",(0,l.jsx)(t.code,{children:"@babel/eslint-parser"})," to maintain and to make linting Babel-compiled code with ESLint easier and more reliable. We would love your help in this endeavor! Contributions on ",(0,l.jsx)(t.a,{href:"https://github.com/babel/babel",children:"GitHub"})," and ",(0,l.jsx)(t.a,{href:"https://opencollective.com/babel",children:"financial donations"})," go a long way in helping us make this integration the best it can be for the community."]})]})}function b(e={}){let{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(u,{...e})}):u(e)}},38049:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(24246);n(27378);var l=n(90496);function i(e){let{children:t,hidden:n,className:i}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,l.Z)("tabItem_wHwb",i),hidden:n,children:t})}},95181:function(e,t,n){n.d(t,{Z:function(){return x}});var a=n(24246),l=n(27378),i=n(90496),r=n(85403),s=n(3620),o=n(77090),c=n(76180),h=n(23418),d=n(19073);function u(e){return l.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,l.isValidElement)(e)&&function(e){let{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function b(e){let{value:t,tabValues:n}=e;return n.some(e=>e.value===t)}var p=n(3344);function f(e){let{className:t,block:n,selectedValue:l,selectValue:s,tabValues:o}=e,c=[],{blockElementScrollPositionUntilNextRender:h}=(0,r.o5)(),d=e=>{let t=e.currentTarget,n=o[c.indexOf(t)].value;n!==l&&(h(t),s(n))},u=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{let n=c.indexOf(e.currentTarget)+1;t=c[n]??c[0];break}case"ArrowLeft":{let n=c.indexOf(e.currentTarget)-1;t=c[n]??c[c.length-1]}}t?.focus()};return(0,a.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":n},t),children:o.map(e=>{let{value:t,label:n,attributes:r}=e;return(0,a.jsx)("li",{role:"tab",tabIndex:l===t?0:-1,"aria-selected":l===t,ref:e=>{c.push(e)},onKeyDown:u,onClick:d,...r,className:(0,i.Z)("tabs__item","tabItem_l0OV",r?.className,{"tabs__item--active":l===t}),children:n??t},t)})})}function m(e){let{lazy:t,children:n,selectedValue:r}=e,s=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){let e=s.find(e=>e.props.value===r);return e?(0,l.cloneElement)(e,{className:(0,i.Z)("margin-top--md",e.props.className)}):null}return(0,a.jsx)("div",{className:"margin-top--md",children:s.map((e,t)=>(0,l.cloneElement)(e,{key:t,hidden:e.props.value!==r}))})}function g(e){let t=function(e){let{defaultValue:t,queryString:n=!1,groupId:a}=e,i=function(e){let{values:t,children:n}=e;return(0,l.useMemo)(()=>{let e=t??u(n).map(e=>{let{props:{value:t,label:n,attributes:a,default:l}}=e;return{value:t,label:n,attributes:a,default:l}}),a=(0,h.lx)(e,(e,t)=>e.value===t.value);if(a.length>0)throw Error(`Docusaurus error: Duplicate values "${a.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`);return e},[t,n])}(e),[r,p]=(0,l.useState)(()=>(function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!b({value:t,tabValues:n}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}let a=n.find(e=>e.default)??n[0];if(!a)throw Error("Unexpected error: 0 tabValues");return a.value})({defaultValue:t,tabValues:i})),[f,m]=function(e){let{queryString:t=!1,groupId:n}=e,a=(0,s.k6)(),i=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,c._X)(i),(0,l.useCallback)(e=>{if(!i)return;let t=new URLSearchParams(a.location.search);t.set(i,e),a.replace({...a.location,search:t.toString()})},[i,a])]}({queryString:n,groupId:a}),[g,x]=function(e){let{groupId:t}=e,n=t?`docusaurus.tab.${t}`:null,[a,i]=(0,d.Nk)(n);return[a,(0,l.useCallback)(e=>{n&&i.set(e)},[n,i])]}({groupId:a}),j=(()=>{let e=f??g;return b({value:e,tabValues:i})?e:null})();return(0,o.Z)(()=>{j&&p(j)},[j]),{selectedValue:r,selectValue:(0,l.useCallback)(e=>{if(!b({value:e,tabValues:i}))throw Error(`Can't select invalid tab value=${e}`);p(e),m(e),x(e)},[m,x,i]),tabValues:i}}(e);return(0,a.jsxs)("div",{className:(0,i.Z)("tabs-container","tabList_J5MA"),children:[(0,a.jsx)(f,{...t,...e}),(0,a.jsx)(m,{...t,...e})]})}function x(e){let t=(0,p.Z)();return(0,a.jsx)(g,{...e,children:u(e.children)},String(t))}},80980:function(e,t,n){n.d(t,{Z:function(){return s},a:function(){return r}});var a=n(27378);let l={},i=a.createContext(l);function r(e){let t=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),a.createElement(i.Provider,{value:t},e.children)}},92307:function(e){e.exports=JSON.parse('{"permalink":"/blog/2020/07/13/the-state-of-babel-eslint","source":"@site/blog/2020-07-13-the-state-of-babel-eslint.md","title":"The State of babel-eslint","description":"babel-eslint is moved to @babel/eslint-parser!","date":"2020-07-13T00:00:00.000Z","tags":[],"readingTime":4.53,"hasTruncateMarker":true,"authors":[{"name":"Kai Cataldo","url":"https://kaicataldo.com","key":"kai","page":null}],"frontMatter":{"layout":"post","title":"The State of babel-eslint","authors":"kai","date":"2020-07-13T00:00:00.000Z","categories":"announcements","share_text":"The State of babel-eslint"},"unlisted":false,"prevItem":{"title":"7.11.0 Released: ECMAScript 2021 support in preset-env, TypeScript 4.0 support, printing config and the future of `babel-eslint`","permalink":"/blog/2020/07/30/7.11.0"},"nextItem":{"title":"7.10.0 Released: Class Fields in preset-env, \'#private in\' checks and better React tree-shaking","permalink":"/blog/2020/05/25/7.10.0"}}')}}]);