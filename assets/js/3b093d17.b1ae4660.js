"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5384],{35318:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return b}});var a=n(27378);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,p=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),c=s(n),m=r,b=c["".concat(p,".").concat(m)]||c[m]||d[m]||l;return n?a.createElement(b,i(i({ref:t},u),{},{components:n})):a.createElement(b,i({ref:t},u))}));function b(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=m;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o[c]="string"==typeof e?e:r,i[1]=o;for(var s=2;s<l;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},10671:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return p},default:function(){return b},frontMatter:function(){return o},metadata:function(){return s},toc:function(){return c}});var a=n(25773),r=n(30808),l=(n(27378),n(35318)),i=["components"],o={id:"babel-plugin-proposal-private-methods",title:"@babel/plugin-proposal-private-methods",sidebar_label:"private-methods"},p=void 0,s={unversionedId:"babel-plugin-proposal-private-methods",id:"babel-plugin-proposal-private-methods",title:"@babel/plugin-proposal-private-methods",description:"NOTE: This plugin is included in @babel/preset-env",source:"@site/../docs/plugin-proposal-private-methods.md",sourceDirName:".",slug:"/babel-plugin-proposal-private-methods",permalink:"/babel-website/docs/babel-plugin-proposal-private-methods",draft:!1,editUrl:"https://github.com/babel/website/edit/main/docs/../docs/plugin-proposal-private-methods.md",tags:[],version:"current",frontMatter:{id:"babel-plugin-proposal-private-methods",title:"@babel/plugin-proposal-private-methods",sidebar_label:"private-methods"},sidebar:"plugins",previous:{title:"pipeline-operator",permalink:"/babel-website/docs/babel-plugin-proposal-pipeline-operator"},next:{title:"record-and-tuple",permalink:"/babel-website/docs/babel-plugin-proposal-record-and-tuple"}},u={},c=[{value:"Example",id:"example",level:2},{value:"Installation",id:"installation",level:2},{value:"Usage",id:"usage",level:2},{value:"With a configuration file (Recommended)",id:"with-a-configuration-file-recommended",level:3},{value:"Via CLI",id:"via-cli",level:3},{value:"Via Node API",id:"via-node-api",level:3},{value:"Options",id:"options",level:2},{value:"<code>loose</code>",id:"loose",level:3},{value:"References",id:"references",level:2}],d={toc:c},m="wrapper";function b(e){var t=e.components,n=(0,r.Z)(e,i);return(0,l.kt)(m,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"NOTE"),": This plugin is included in ",(0,l.kt)("inlineCode",{parentName:"p"},"@babel/preset-env"))),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Version"),(0,l.kt)("th",{parentName:"tr",align:null},"Changes"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"v7.3.0")),(0,l.kt)("td",{parentName:"tr",align:null},"Support private accessors (getters and setters)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"v7.2.0")),(0,l.kt)("td",{parentName:"tr",align:null},"Initial Release"))))),(0,l.kt)("h2",{id:"example"},"Example"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="JavaScript"',title:'"JavaScript"'},"class Counter extends HTMLElement {\n  #xValue = 0;\n\n  get #x() {\n    return this.#xValue;\n  }\n  set #x(value) {\n    this.#xValue = value;\n    window.requestAnimationFrame(this.#render.bind(this));\n  }\n\n  #clicked() {\n    this.#x++;\n  }\n}\n")),(0,l.kt)("h2",{id:"installation"},"Installation"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh",metastring:'title="Shell"',title:'"Shell"'},"$ npm install @babel/plugin-proposal-private-methods --save-dev\n")),(0,l.kt)("h2",{id:"usage"},"Usage"),(0,l.kt)("h3",{id:"with-a-configuration-file-recommended"},"With a configuration file (Recommended)"),(0,l.kt)("p",null,"Without options:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="babel.config.json"',title:'"babel.config.json"'},'{\n  "plugins": ["@babel/plugin-proposal-private-methods"]\n}\n')),(0,l.kt)("p",null,"With options:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="babel.config.json"',title:'"babel.config.json"'},'{\n  "plugins": [["@babel/plugin-proposal-private-methods", { "loose": true }]]\n}\n')),(0,l.kt)("h3",{id:"via-cli"},"Via CLI"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh",metastring:'title="Shell"',title:'"Shell"'},"$ babel --plugins @babel/plugin-proposal-private-methods script.js\n")),(0,l.kt)("h3",{id:"via-node-api"},"Via Node API"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="JavaScript"',title:'"JavaScript"'},'require("@babel/core").transformSync("code", {\n  plugins: ["@babel/plugin-proposal-private-methods"],\n});\n')),(0,l.kt)("h2",{id:"options"},"Options"),(0,l.kt)("h3",{id:"loose"},(0,l.kt)("inlineCode",{parentName:"h3"},"loose")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"boolean"),", defaults to ",(0,l.kt)("inlineCode",{parentName:"p"},"false"),"."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Note: The ",(0,l.kt)("inlineCode",{parentName:"p"},"loose")," mode configuration setting ",(0,l.kt)("em",{parentName:"p"},"must")," be the same as ",(0,l.kt)("a",{parentName:"p",href:"/babel-website/docs/babel-plugin-proposal-class-properties"},(0,l.kt)("inlineCode",{parentName:"a"},"@babel/plugin-proposal-class-properties")),".")),(0,l.kt)("p",null,"When true, private methods will be assigned directly on its parent\nvia ",(0,l.kt)("inlineCode",{parentName:"p"},"Object.defineProperty")," rather than a ",(0,l.kt)("inlineCode",{parentName:"p"},"WeakSet"),". This results in improved\nperformance and debugging (normal property access vs ",(0,l.kt)("inlineCode",{parentName:"p"},".get()"),') at the expense\nof potentially leaking "privates" via things like ',(0,l.kt)("inlineCode",{parentName:"p"},"Object.getOwnPropertyNames"),"."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u26a0\ufe0f Consider migrating to the top level ",(0,l.kt)("a",{parentName:"p",href:"/babel-website/docs/assumptions#privatefieldsasproperties"},(0,l.kt)("inlineCode",{parentName:"a"},"privateFieldsAsProperties"))," assumption.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="babel.config.json"',title:'"babel.config.json"'},'{\n  "assumptions": {\n    "privateFieldsAsProperties": true,\n    "setPublicClassFields": true\n  }\n}\n')),(0,l.kt)("p",null,"Note that both ",(0,l.kt)("inlineCode",{parentName:"p"},"privateFieldsAsProperties")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"setPublicClassFields")," must be set to ",(0,l.kt)("inlineCode",{parentName:"p"},"true"),"."),(0,l.kt)("p",null,"Let's use the following as an example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="JavaScript"',title:'"JavaScript"'},"class Foo {\n  constructor() {\n    this.publicField = this.#privateMethod();\n  }\n\n  #privateMethod() {\n    return 42;\n  }\n}\n")),(0,l.kt)("p",null,"By default, this becomes:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="JavaScript"',title:'"JavaScript"'},'var Foo = function Foo() {\n  "use strict";\n\n  babelHelpers.classCallCheck(this, Foo);\n\n  _privateMethod.add(this);\n\n  this.publicField = babelHelpers\n    .classPrivateMethodGet(this, _privateMethod, _privateMethod2)\n    .call(this);\n};\n\nvar _privateMethod = new WeakSet();\n\nvar _privateMethod2 = function _privateMethod2() {\n  return 42;\n};\n')),(0,l.kt)("p",null,"With ",(0,l.kt)("inlineCode",{parentName:"p"},"{ privateFieldsAsProperties: true }"),", it becomes:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="JavaScript"',title:'"JavaScript"'},'var Foo = function Foo() {\n  "use strict";\n\n  babelHelpers.classCallCheck(this, Foo);\n  Object.defineProperty(this, _privateMethod, {\n    value: _privateMethod2,\n  });\n  this.publicField = babelHelpers\n    .classPrivateFieldLooseBase(this, _privateMethod)\n    [_privateMethod]();\n};\n\nvar _privateMethod = babelHelpers.classPrivateFieldLooseKey("privateMethod");\n\nvar _privateMethod2 = function _privateMethod2() {\n  return 42;\n};\n')),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"You can read more about configuring plugin options ",(0,l.kt)("a",{parentName:"p",href:"https://babeljs.io/docs/en/plugins#plugin-options"},"here"))),(0,l.kt)("h2",{id:"references"},"References"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/tc39/proposal-private-methods"},"Proposal: Private methods and getter/setters for JavaScript classes"))))}b.isMDXComponent=!0}}]);