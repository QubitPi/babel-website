"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["1204"],{99432:function(e,n,r){r.r(n),r.d(n,{metadata:()=>t,contentTitle:()=>d,default:()=>p,assets:()=>c,toc:()=>u,frontMatter:()=>o});var t=JSON.parse('{"id":"babel-plugin-transform-json-modules","title":"@babel/plugin-transform-json-modules","description":"Transforms import ... with { type: \\"json\\" } declarations to platform-specific API to read and then JSON.parse the imported file.","source":"@site/../docs/plugin-transform-json-modules.md","sourceDirName":".","slug":"/babel-plugin-transform-json-modules","permalink":"/babel-website/docs/babel-plugin-transform-json-modules","draft":false,"unlisted":false,"editUrl":"https://github.com/babel/website/edit/main/docs/../docs/plugin-transform-json-modules.md","tags":[],"version":"current","frontMatter":{"id":"babel-plugin-transform-json-modules","title":"@babel/plugin-transform-json-modules","sidebar_label":"json-modules"},"sidebar":"docs","previous":{"title":"duplicate-named-capturing-groups-regex","permalink":"/babel-website/docs/babel-plugin-transform-duplicate-named-capturing-groups-regex"},"next":{"title":"regexp-modifiers","permalink":"/babel-website/docs/babel-plugin-transform-regexp-modifiers"}}'),s=r("24246"),a=r("80980"),l=r("95181"),i=r("38049");let o={id:"babel-plugin-transform-json-modules",title:"@babel/plugin-transform-json-modules",sidebar_label:"json-modules"},d=void 0,c={},u=[{value:"Example",id:"example",level:2},{value:"Installation",id:"installation",level:2},{value:"Usage",id:"usage",level:2},{value:"With a configuration file (Recommended)",id:"with-a-configuration-file-recommended",level:3},{value:"Via CLI",id:"via-cli",level:3},{value:"Via Node API",id:"via-node-api",level:3},{value:"Options",id:"options",level:2},{value:"<code>uncheckedRequire</code>",id:"uncheckedrequire",level:3},{value:"References",id:"references",level:2}];function h(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Transforms ",(0,s.jsx)(n.code,{children:'import ... with { type: "json" }'})," declarations to platform-specific API to read and then ",(0,s.jsx)(n.code,{children:"JSON.parse"})," the imported file."]}),"\n",(0,s.jsxs)(n.p,{children:["The transformation applied by this plugin depends on your top-level ",(0,s.jsx)(n.a,{href:"https://babeljs.io/docs/options#targets",children:(0,s.jsx)(n.code,{children:"targets"})})," to detect whether the generated code should be compatible with Node.js, browsers, or both. When targeting Node.js, the generated code will also change depending on whether you are compiling modules to CommonJS or not."]}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsx)(n.p,{children:"This plugin cannot be used when compiling modules to AMD, SystemJS, or UMD."})}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsxs)(n.p,{children:["This plugin only transforms import decalarations and not dynamic ",(0,s.jsx)(n.code,{children:"import()"})," calls."]})}),"\n",(0,s.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="input.js"',children:'import data from "./data.json" with { type: "json" };\n'})}),"\n",(0,s.jsx)(n.p,{children:"will be transformed to"}),"\n",(0,s.jsxs)(l.Z,{children:[(0,s.jsx)(i.Z,{value:"browsers",label:"Browsers",default:!0,children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="output.js"',children:'const data = await fetch(import.meta.resolve("./data.json")).then(r => r.json());\n'})})}),(0,s.jsx)(i.Z,{value:"node-esm",label:"Node.js (ESM)",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="output.mjs"',children:'import { readFileSync as _readFileSync } from "fs";\nconst data = JSON.parse(_readFileSync(new URL(import.meta.resolve("./data.json"))));\n'})})}),(0,s.jsx)(i.Z,{value:"node-cjs",label:"Node.js (CommonJS)",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="output.cjs"',children:'"use strict";\n\nconst data = JSON.parse(require("fs").readFileSync(require.resolve("./data.json")));\n'})})}),(0,s.jsx)(i.Z,{value:"browsers-node-cjs",label:"Browsers and Node.js (ESM)",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="output.js"',children:'const data = await (\n  typeof process === "object" && process.versions?.node\n    ? import("fs").then(fs => fs.promises.readFile(new URL(import.meta.resolve("./data.json")))).then(JSON.parse)\n    : fetch(import.meta.resolve("./data.json")).then(r => r.json())\n);\n'})})})]}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsxs)(l.Z,{groupId:"npm2yarn",children:[(0,s.jsx)(i.Z,{value:"npm",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"npm install --save-dev @babel/plugin-transform-json-modules\n"})})}),(0,s.jsx)(i.Z,{value:"yarn",label:"Yarn",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"yarn add --dev @babel/plugin-transform-json-modules\n"})})}),(0,s.jsx)(i.Z,{value:"pnpm",label:"pnpm",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"pnpm add --save-dev @babel/plugin-transform-json-modules\n"})})})]}),"\n",(0,s.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(n.h3,{id:"with-a-configuration-file-recommended",children:"With a configuration file (Recommended)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",metastring:'title="babel.config.json"',children:'{\n  "plugins": ["@babel/plugin-transform-json-modules"]\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"via-cli",children:"Via CLI"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",metastring:'title="Shell"',children:"babel --plugins=@babel/plugin-transform-json-modules script.js\n"})}),"\n",(0,s.jsx)(n.h3,{id:"via-node-api",children:"Via Node API"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="JavaScript"',children:'require("@babel/core").transformSync("code", {\n  plugins: ["@babel/plugin-transform-json-modules"],\n});\n'})}),"\n",(0,s.jsx)(n.h2,{id:"options",children:"Options"}),"\n",(0,s.jsx)(n.h3,{id:"uncheckedrequire",children:(0,s.jsx)(n.code,{children:"uncheckedRequire"})}),"\n",(0,s.jsxs)(n.p,{children:["Type: ",(0,s.jsx)(n.code,{children:"boolean"}),(0,s.jsx)("br",{}),"\nDefault: ",(0,s.jsx)(n.code,{children:"false"}),(0,s.jsx)("br",{}),"\nAdded in ",(0,s.jsx)(n.code,{children:"v7.25.0"})]}),"\n",(0,s.jsxs)(n.p,{children:["When set to ",(0,s.jsx)(n.code,{children:"true"}),", the plugin will generate a simpler output by using ",(0,s.jsx)(n.code,{children:"require"})," directly to import the JSON file. When targeting CommonJS, this option leads to output that is easier to analyze for bundlers but doesn't check that the module being imported is actually JSON:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"In"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'import data from "./data.json" with { type: "json" };\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["Out (without ",(0,s.jsx)(n.code,{children:"uncheckedRequire: true"}),")"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'const data = JSON.parse(require("fs").readFileSync(require.resolve("./data.json")));\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["Out (with ",(0,s.jsx)(n.code,{children:"uncheckedRequire: true"}),")"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'const data = require("./data.json");\n'})}),"\n",(0,s.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/tc39/proposal-json-modules/",children:"Proposal: JSON Modules"})}),"\n"]})]})}function p(e={}){let{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},38049:function(e,n,r){r.d(n,{Z:()=>l});var t=r("24246");r("27378");var s=r("90496");let a="tabItem_wHwb";function l(e){let{children:n,hidden:r,className:l}=e;return(0,t.jsx)("div",{role:"tabpanel",className:(0,s.Z)(a,l),hidden:r,children:n})}},95181:function(e,n,r){r.d(n,{Z:()=>v});var t=r("24246"),s=r("27378"),a=r("90496"),l=r("85403"),i=r("3620"),o=r("77090"),d=r("76180"),c=r("23418"),u=r("19073");function h(e){return s.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||s.isValidElement(e)&&function(e){let{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){let{value:n,tabValues:r}=e;return r.some(e=>e.value===n)}var m=r("3344");let j="tabList_J5MA",f="tabItem_l0OV";function b(e){let{className:n,block:r,selectedValue:s,selectValue:i,tabValues:o}=e,d=[],{blockElementScrollPositionUntilNextRender:c}=(0,l.o5)(),u=e=>{let n=e.currentTarget,r=o[d.indexOf(n)].value;r!==s&&(c(n),i(r))},h=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{let r=d.indexOf(e.currentTarget)+1;n=d[r]??d[0];break}case"ArrowLeft":{let r=d.indexOf(e.currentTarget)-1;n=d[r]??d[d.length-1]}}n?.focus()};return(0,t.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":r},n),children:o.map(e=>{let{value:n,label:r,attributes:l}=e;return(0,t.jsx)("li",{role:"tab",tabIndex:s===n?0:-1,"aria-selected":s===n,ref:e=>d.push(e),onKeyDown:h,onClick:u,...l,className:(0,a.Z)("tabs__item",f,l?.className,{"tabs__item--active":s===n}),children:r??n},n)})})}function g(e){let{lazy:n,children:r,selectedValue:l}=e,i=(Array.isArray(r)?r:[r]).filter(Boolean);if(n){let e=i.find(e=>e.props.value===l);return e?(0,s.cloneElement)(e,{className:(0,a.Z)("margin-top--md",e.props.className)}):null}return(0,t.jsx)("div",{className:"margin-top--md",children:i.map((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==l}))})}function x(e){let n=function(e){let{defaultValue:n,queryString:r=!1,groupId:t}=e,a=function(e){let{values:n,children:r}=e;return(0,s.useMemo)(()=>{let e=n??h(r).map(e=>{let{props:{value:n,label:r,attributes:t,default:s}}=e;return{value:n,label:r,attributes:t,default:s}});return!function(e){let n=(0,c.lx)(e,(e,n)=>e.value===n.value);if(n.length>0)throw Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,r])}(e),[l,m]=(0,s.useState)(()=>(function(e){let{defaultValue:n,tabValues:r}=e;if(0===r.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:r}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${r.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}let t=r.find(e=>e.default)??r[0];if(!t)throw Error("Unexpected error: 0 tabValues");return t.value})({defaultValue:n,tabValues:a})),[j,f]=function(e){let{queryString:n=!1,groupId:r}=e,t=(0,i.k6)(),a=function(e){let{queryString:n=!1,groupId:r}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!r)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:n,groupId:r}),l=(0,d._X)(a);return[l,(0,s.useCallback)(e=>{if(!a)return;let n=new URLSearchParams(t.location.search);n.set(a,e),t.replace({...t.location,search:n.toString()})},[a,t])]}({queryString:r,groupId:t}),[b,g]=function(e){var n;let{groupId:r}=e;let t=(n=r)?`docusaurus.tab.${n}`:null,[a,l]=(0,u.Nk)(t);return[a,(0,s.useCallback)(e=>{if(!!t)l.set(e)},[t,l])]}({groupId:t}),x=(()=>{let e=j??b;return p({value:e,tabValues:a})?e:null})();return(0,o.Z)(()=>{x&&m(x)},[x]),{selectedValue:l,selectValue:(0,s.useCallback)(e=>{if(!p({value:e,tabValues:a}))throw Error(`Can't select invalid tab value=${e}`);m(e),f(e),g(e)},[f,g,a]),tabValues:a}}(e);return(0,t.jsxs)("div",{className:(0,a.Z)("tabs-container",j),children:[(0,t.jsx)(b,{...n,...e}),(0,t.jsx)(g,{...n,...e})]})}function v(e){let n=(0,m.Z)();return(0,t.jsx)(x,{...e,children:h(e.children)},String(n))}},80980:function(e,n,r){r.d(n,{Z:function(){return i},a:function(){return l}});var t=r(27378);let s={},a=t.createContext(s);function l(e){let n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);